namespace = c3rd_events
#Notes for Military Anarchy :
# Military anarchy is called by c3rd_events.9 - ruler assassinated by generals. Rulers above 85 popularity are immune - THIS IS WHY POPULARITY MUST BE TANKED BY NEGATIVE EVENTS TO AVOID PLAYERS BEING INVULNERABLE TO THE ANARCHY
# Chances to be called when :
# -You dont accept the call to war of generals : c3rd_events.7
# -Accepted it but did not declare : c3rd_events.75
# -c3rd_events.81, which is the special case of having only one powerful general (edge case, very rare)
# -Barbarians ransacking the lands : c3rd_other_events.60
# The chances are scaled by a hidden variable : unworthy_leader
# It increases when :
# - General intervention on succession crisis denied : c3rd_events.3 
# - In republic, when the general fail to be convincing c3rd_events.6
# - Ruler refuses to go to war c3rd_events.7 (it decreases when you go to war - bit too simple, nerf ?), gain a lot more when you fail to go to war c3rd_events.75
# - You refuse the military advantages : c3rd_events.8
# - c3rd_events.81 denied
# - Denied the vanilla general call commander_loyalty.5 - a faire plus, c'est plus immersif avec la version de base


#Crisis will create vassals, and some country (AI) could get crushed under the weight of vassals, reducing their PI by 200% because of diplomatic relations.
#This is for making clients/satrapy back to tributaries (where they can get independent and stop helping the master)
c3rd_events.1 = { #oh noes, too much vassals
    type = country_event
    title = "c3rd_events.1.t"
    desc = "c3rd_events.1.desc"

    picture = successors

    trigger = {

        has_land = yes
        num_active_relations > max_diplomatic_relations
        any_subject = { #check if releasable
            OR = {
                is_subject_type = client_state
                is_subject_type = satrapy
            }
            has_subject_loyalty <= 80
            NOR = {
                has_country_modifier = autonomy_granted
                has_variable = recent_client
                has_truce_with = root
            }
        }
        current_date >= 900.1.1
    }


    immediate = {
        ordered_subject = {
            limit = {
                OR = {
                    is_subject_type = client_state
                    is_subject_type = satrapy
                }
                NOR = {
                    has_country_modifier = autonomy_granted
                    has_variable = recent_client
                    has_truce_with = root
                }
            }
            order_by = { #take least loyal one
                value = 100
                subtract = has_subject_loyalty
                min = 0
            }
            max = 1
            save_scope_as = chosen_subject
            if = {
                limit = { has_variable = subject_wants_more_cooldown}
                remove_variable = subject_wants_more_cooldown
            }
        }
        hidden_effect = {
            release_subject = scope:chosen_subject
            make_subject = {
                target = scope:chosen_subject
                type = tributary
            }
        }
        scope:chosen_subject = {
            set_variable = {
                name = subject_wants_more_cooldown
                days = 3650
            }
        }

    }

    option = { #ok
        name = c3rd_events.1.a
        custom_tooltip = c3rd_events.1.a.tt1
    }

}

#This is for crisis modifier - objective is to counterbalance technologies, and avoid players geting bored at 100 stability, 100% happiness pops for 300 years

c3rd_events.2 = { #3rd century
    type = country_event
    title = "c3rd_events.2.t"
    desc = "c3rd_events.2.desc"

    picture = persia_marching

    trigger = {
        NOT = { has_country_modifier = crisis_of_the_third_century}
        has_land = yes
        num_of_cities >= 10
        is_tribal = no
        current_date >= 900.1.1

    }


    immediate = {
        add_country_modifier = {
            name = crisis_of_the_third_century
            duration = -1
        }

    }

    option = { #ok
        name = c3rd_events.2.a
        custom_tooltip = c3rd_events.2.a.tt1
    }

}
#Event for military anarchy
c3rd_events.3 = { #succession crisis
    type = country_event
    title = "c3rd_events.3.t"
    desc = {
        desc = "c3rd_events.3.desc"
        triggered_desc = {
            trigger = {
                scope:general_target = {
                    is_ruler = yes
                }
            }
            desc = "c3rd_events.3.desc.1"

        }
        triggered_desc = {
            trigger = {
                scope:general_target = {
                    is_ruler = no
                }
            }
            desc = "c3rd_events.3.desc.2"
        }
    }

    left_portrait = scope:king_maker_general
    left_portrait = scope:general_friend
    right_portrait = scope:general_target

    picture = persia_marching

    trigger = {

        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        num_of_cities > 900
        has_country_modifier = crisis_of_the_third_century
        scope:general_target = { is_alive = yes }
        scope:king_maker_general = { is_alive = yes }


    }


    immediate = {
        scope:king_maker_general = {
            hidden_effect = {
                while = {
                    limit = { num_loyal_veterans < country_size_revolt_value }
                    add_loyal_veterans = 1
                }
            }
            random_friend = {
                limit = {
                    is_governor = yes
                }
                save_scope_as = general_friend
            }

        }
        set_local_variable = {
            name = cohort_boost
            value = root.num_of_provinces
        }
        change_local_variable = {
            name = cohort_boost
            divide = 30
        }
        change_local_variable = {
            name = cohort_boost
            multiply = root.military_tech
        }
        random_army = {
            limit = {
                exists = commander
                commander = scope:king_maker_general
            }

            while = {
                limit = {
                    unit_size < local_var:cohort_boost
                    scope:king_maker_general.wealth >= 100
                }
                hidden_effect = {
                    add_relevant_loyal_subunit_effect = yes
                }
            }
        }



    }

    option = { #want to kill the king
        name = c3rd_events.3.a
        custom_tooltip = c3rd_events.3.a.tt1
        trigger = {
            scope:general_target = {
                employer = root
                is_ruler = yes
            }
        }

        trigger_event = {
            id = c3rd_events.4
            days = 15
        }
    }
    option = { #kill target
        name = c3rd_events.3.b
        custom_tooltip = c3rd_events.3.b.tt1
        trigger = {
            scope:general_target = {
                employer = root
                is_ruler = no
            }
        }
        trigger_event = {
            id = c3rd_events.4
            days = 15
        }
    }
    option = { #good luck he's gone
        name = c3rd_events.3.c
        custom_tooltip = c3rd_events.3.c.tt1
        highlight = yes
        trigger = {
            scope:general_target = {
                NOT = {employer = root}
            }
        }
        hidden_effect = {
            scope:king_maker_general = {
                add_loyalty = requests_fulfilled
            }
        }
    }
    option = { #denied
        name = c3rd_events.3.d
        custom_tooltip = c3rd_events.3.d.tt1
        scope:king_maker_general = {
            add_loyalty = dire_requests_denied
            every_friend = {
                add_loyalty = dire_requests_denied
            }
        }
        if = {#to prevent players from avoiding the military anarchy forever without a cost
            limit = {current_date >= 1100.1.1 }
            add_stability = -4
        }
        else_if = {
            limit = {current_date >= 1000.1.1 }
            add_stability = -2
        }
        if = {
            limit = { has_variable = unworthy_leader}
            change_variable = {
                name = unworthy_leader
                add = 1
            }
        }
        else = {
            set_variable = {
                name = unworthy_leader
                value = 1
            }
        }

    }

}
c3rd_events.4 = { #succession crisis kill the target
    type = country_event
    title = "c3rd_events.4.t"
    desc = {
        triggered_desc = {
            trigger = {
                scope:general_target = {
                    is_ruler = yes
                }
            }
            desc = "c3rd_events.4.desc.1"

        }
        triggered_desc = {
            trigger = {
                scope:general_target = {
                    is_ruler = no
                }
            }
            desc = "c3rd_events.4.desc.2"

        }

    }
    left_portrait = scope:king_maker_general
    right_portrait = scope:general_target


    picture = senator_conversing

    trigger = {

        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        scope:general_target = {
            employer = root
            is_alive = yes
        }


    }
    immediate = {
        hidden_effect = {
            scope:king_maker_general = {
                add_loyalty = requests_fulfilled
                if = {
                    limit = {
                        NOT = {
                            has_character_modifier = king_maker
                        }
                    }
                    add_character_modifier = {
                        name = king_maker
                        duration = 7300
                    }
                }
                every_friend = {
                    add_loyalty = requests_fulfilled
                }
            }
            if = {
                limit = {
                    has_variable = recent_military_anarchy
                }
                remove_variable = recent_military_anarchy
                set_variable = {
                    name = recent_military_anarchy
                    days = 18000 #50 years
                }
            }
            if = {
                limit = {
                    has_country_modifier = military_anarchy
                }
                remove_country_modifier = military_anarchy
            }
            set_variable = {
                name = recent_military_anarchy
                days = 18000 #50 years
            }

        }
        add_country_modifier = {
            name = military_anarchy
            duration = 9125
        }




    }
    option = { #well done brave general
        name = c3rd_events.4.a
        custom_tooltip = c3rd_events.4.a.tt1
        scope:general_target = {
			death = {
				death_reason = death_execution
				killer = scope:king_maker_general
			}
		}

    }
    option = { #do you want the throne ?
        name = c3rd_events.4.b
        custom_tooltip = c3rd_events.4.b.tt1
        trigger = {
            scope:king_maker_general = {
                popularity > 75
            }
            scope:general_target = {
                is_ruler = yes
            }
        }
        highlight = yes
        set_as_ruler = scope:king_maker_general
        scope:general_target = {
			death = {
				death_reason = death_execution
				killer = scope:king_maker_general
			}
		}
        add_stability = 5
        trigger_event = {
            id = c3rd_other_events.11
            days = 15
        }
    }
    option = { #decrease his popularity
        name = c3rd_events.4.c
        custom_tooltip = c3rd_events.4.c.tt1
        scope:general_target = {
            death = {
                death_reason = death_execution
                killer = scope:king_maker_general
            }
        }
        scope:king_maker_general = {
            add_popularity = -50
        }
        add_political_influence = -15
    }

}

c3rd_events.5 = {#general intervention : provoke military crisis where there is none
    type = country_event
    title = "c3rd_events.5.t"
    desc = "c3rd_events.5.desc"

    picture = persia_marching
    trigger = {
        NOR = {
            has_variable = recent_military_anarchy
            has_variable = recent_volontary_general
        }
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        num_of_cities >= 900
        any_character = {
            is_general = yes
            is_ruler = no
            is_disloyal = no
            OR = {
                AND = {
                    is_governor = yes
                    any_friend = {
                        employer = root
                        has_any_office = yes
                    }
                }
                any_friend = {
                    employer = root
                    is_governor = yes
                }
            }
            OR = {
                any_character_unit = {
                    unit_size >= 50
                }
                wealth >= root.num_of_cities
            }
        }
        OR = {
            stability < 30
            AND = {
                is_monarchy = yes
                legitimacy < 25
            }
            AND = {
                is_republic = yes
                has_senate_approval <= 0.25
            }
            towards_civil_war = yes
            has_civil_war = yes
        }

    }
    left_portrait = scope:volontary_general

    weight_multiplier = {
		modifier = {
			factor = 3
			towards_civil_war = yes
		}
		modifier = {
			factor = 3
			has_civil_war = yes
		}
        modifier = {
            factor = 2
            is_monarchy = yes
            legitimacy < 0
        }
        modifier = {
            factor = 2
            stability < 10
        }
        modifier = {
            factor = 2
            current_date >= 1000.1.1
        }
        modifier = {
            factor = 2
            any_character = {
                is_general = yes
                is_disloyal = yes
            }
        }
        modifier = {
            factor = 0.5
            is_republic = yes
        }
        modifier = {
            factor = 2
            has_country_modifier = political_unstability
        }
        modifier = {
            factor = 2
            any_character = {
                count >= 3
                is_general = yes
                is_disloyal = yes
            }
        }

    }

    immediate = {
        random_character = {
            limit = {
                is_general = yes
                is_ruler = no
                is_disloyal = no
                OR = {
                    AND = {
                        is_governor = yes
                        any_friend = {
                            employer = root
                            has_any_office = yes
                        }
                    }
                    any_friend = {
                        employer = root
                        is_governor = yes
                    }
                }
                OR = {
                    any_character_unit = {
                        unit_size >= 50
                    }
                    wealth >= root.num_of_cities
                }
            }
            save_scope_as = volontary_general
        }
        set_local_variable = {
            name = cohort_boost
            value = root.num_of_provinces
        }
        change_local_variable = {
            name = cohort_boost
            divide = 50
        }
        change_local_variable = {
            name = cohort_boost
            multiply = root.military_tech
        }
        random_army = {
            limit = {
                exists = commander
                commander = scope:volontary_general
            }

            while = {
                limit = {
                    unit_size < local_var:cohort_boost
                    scope:volontary_general.wealth >= 100
                }
                hidden_effect = {
                    add_relevant_loyal_subunit_effect = yes
                }
            }
        }
        set_variable = {
            name = recent_volontary_general
            days = 1100 #3years
        }

    }

    option = {#letsgo
        name = c3rd_events.5.a
        custom_tooltip = c3rd_events.5.a.tt1
		ai_chance = {
            modifier = {
                factor = 10
                stability <= 25
            }
        }
        every_character = {
            limit = {
                OR = {
                    is_friend = scope:volontary_general
                    this = scope:volontary_general
                }
            }
            add_loyalty = requests_fulfilled
        }
        if = {
            limit = {
                has_civil_war = yes
                has_country_modifier = internal_collapse
            }
            add_stability = 15
        }
        else = {
            add_stability = 6
        }
        if = {
            limit = {
                is_monarchy = yes
            }
            add_legitimacy = 6
        }
        else_if = {
            limit = {
                is_republic =  yes
            }
            if = {
                limit = { has_party_type = optimates_party }
                add_party_approval = {
                    party_type = boni_party
                    value = 20
                }
                add_party_approval = {
                    party_type = populares_party
                    value = 20
                }
                add_party_approval = {
                    party_type = optimates_party
                    value = 20
                }

            }
            else = {
                add_party_approval = {
                    party_type = traditionalist_party
                    value = 20
                }
                add_party_approval = {
                    party_type = democratic_party
                    value = 20
                }

                add_party_approval = {
                    party_type = oligarchic_party
                    value = 20
                }
            }
        }
        every_character = {
            limit = {
                is_disloyal = yes
                not = {
                    is_rival = scope:volontary_general
                }
            }
            add_loyalty = loyalty_forced
        }
        hidden_effect = {
            random_list = {
                50 = {
                    modifier = {
                        add = scope:volontary_general.popularity
                    }
                    modifier = {
                        add = 20
                        is_ai = yes
                        has_country_modifier = internal_collapse
                    }
                }
                40 = {
                    modifier = {
                        add = 20
                        current_date >= 1000.1.1
                    }
                    modifier = {
                        add = 20
                        current_date >= 1100.1.1
                    }
                    modifier = {
                        add = 50
                        scope:volontary_general = {
                            any_rival = {
                                count >= 2
                                is_general = yes
                                any_character_unit = {
                                    unit_size >= 20
                                }

                            }
                        }
                    }
                    trigger_event = {
                        id = c3rd_events.6
                        days = 10
                    }
                }
            }
        }


    }
    option = {#nah bad idea
        name = c3rd_events.5.b
        custom_tooltip = c3rd_events.5.b.tt1
        every_character = {
            limit = {
                OR = {
                    is_friend = scope:volontary_general
                    this = scope:volontary_general
                }
            }
            add_loyalty = medium_requests_denied
        }
        if = {#to prevent players from avoiding the military anarchy forever without a cost
            limit = {current_date >= 1100.1.1 }
            add_stability = -7
        }
        else_if = {
            limit = {current_date >= 1000.1.1 }
            add_stability = -5
        }
        else = {
            add_stability = -3
        }

    }

}

c3rd_events.6 = { #volontary general must be convincing
    type = country_event
    title = "c3rd_events.6.t"
    desc = {
        triggered_desc = {
            trigger = {
                is_monarchy = yes
            }
            desc = "c3rd_events.6.desc.1"

        }
        triggered_desc = {
            trigger = {
                is_republic = yes
            }
            desc = "c3rd_events.6.desc.2"

        }
    }

    picture = romans_marching

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1

    }
    left_portrait = scope:volontary_general

    immediate = {
        if = {
            limit = {
                is_monarchy = yes
            }
            add_country_modifier = {
                name = military_anarchy
                duration = 9125 #25y
            }
            set_variable = {
                name = recent_military_anarchy
                days = 18000 #50 years
            }
            scope:volontary_general = {
                add_character_modifier = {
                    name = king_maker
                    duration = 7300
                }
            }
            add_tyranny = 10
        }
        else_if = {
            limit = {
                is_republic = yes
            }
            add_tyranny = 10
            scope:volontary_general = {
                add_loyalty = humiliated_powerful_general
            }
            if = {
                limit = { has_variable = unworthy_leader}
                if = {
                    limit = { 
                        OR = {
                            has_law = constantine_reform_law
                            has_law = decentralized_administration_law
                        }
                    }
                    change_variable = {
                        name = unworthy_leader
                        add = 1
                    }
                }
                else = {
                    change_variable = {
                        name = unworthy_leader
                        add = 2
                    } 
                }
            }
            else = {
                if = {
                    limit = { 
                        OR = {
                            has_law = constantine_reform_law
                            has_law = decentralized_administration_law
                        }
                    }
                    set_variable = {
                        name = unworthy_leader
                        value = 1
                    }
                }
                else = {
                    set_variable = {
                        name = unworthy_leader
                        value = 2
                    }
                }
            }
        }

    }

    option = {#ok for monarchies
        name = c3rd_events.6.a
        custom_tooltip = c3rd_events.6.a.tt1
        trigger = {
            is_monarchy = yes
        }

    }
    option = {#ok for republics
        name = c3rd_events.6.b
        custom_tooltip = c3rd_events.6.b.tt1
        trigger = {
            is_republic = yes
        }
    }

}

#Generals kill Severe Alexandre

c3rd_events.7 = { #Generals ask for a war
    type = country_event
    title = "c3rd_events.7.t"
    desc = {
        desc = "c3rd_events.7.desc"
        triggered_desc = {
            trigger = {
                scope:target_neighbour = {
                    is_tribal = yes
                }
            }
            desc = "c3rd_events.7.desc.1"

        }
        triggered_desc = {
            trigger = {
                scope:target_neighbour = {
                    is_tribal = no
                }
            }
            desc = "c3rd_events.7.desc.2"
        }
    }

    picture = successors

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        is_ai = no
        has_country_modifier = crisis_of_the_third_century
        NOR = {
            has_country_modifier = military_anarchy
            has_variable = recent_military_anarchy
            has_variable = recent_general_asking
            has_variable = on_going_rep_thingy
            has_country_modifier = political_unstability
            has_law = constantine_reform_law
            has_law = decentralized_administration_law
        }
        num_of_cities >= 900
        any_character = {
            count >= 3 #you should have a quite important military establishment
            is_general = yes
            is_mercenary = no
            loyalty < 75 #very loyal general will follow you to hell
            NOT = {
                is_friend = root.current_ruler
            }
        }
        has_civil_war = no
        any_neighbour_country = {
            NOR = {
                has_truce_with = root
                alliance_with = root
                is_subject_of = root
            }
            OR = {
                is_tribal = yes
                root = {
                    opinion = {
                        target = prev
                        value < 0
                    }
                }
            }
        }

    }

    left_portrait = current_ruler
    right_portrait = scope:general_leader

    weight_multiplier = {
		modifier = {
			factor = 0.5
			towards_civil_war = yes
		}
		modifier = {
			factor = 0.2
			has_aggressive_expansion >= 50
		}
        modifier = {
            factor = 2
            war = no
        }
        modifier = {
            factor = 2
            any_neighbour_country = {
                NOR = {
                    has_truce_with = root
                    alliance_with = root
                    is_subject_of = root
                }
                root = {
                    opinion = {
                        target = prev
                        value < 100
                    }
                }

            }
        }
        modifier = {
            factor = 2
            has_aggressive_expansion = 0
        }

    }

    immediate = {
        random_character = {
            limit = {
                is_general = yes
                is_mercenary = no
                loyalty < 75
                NOT = {
                    is_friend = root.current_ruler
                }
            }
            weight = {
                modifier = {
                    add = power_base
                }
            }
            save_scope_as = general_leader
        }
        random_neighbour_country = {
            limit = {
                NOR = {
                    has_truce_with = root
                    alliance_with = root
                    is_subject_of = root
                }
                OR = {
                    is_tribal = yes
                    root = {
                        opinion = {
                            target = prev
                            value < 0
                        }
                    }
                }
            }
            save_scope_as = target_neighbour
        }

    }

    option = {#ok war
        name = c3rd_events.7.a
        custom_tooltip = c3rd_events.7.a.tt1
        set_variable = {
            name = recent_general_asking
            days = 3650 #10years
        }
        if = {
            limit = {
                has_variable = unworthy_leader
                var:unworthy_leader > 1
            }
            change_variable = {
                name = unworthy_leader
                add = -1
            }
        }
        else_if = {
            limit = {
                has_variable = unworthy_leader
                var:unworthy_leader <= 1
            }
            remove_variable = unworthy_leader
        }
        declare_war_with_wargoal = {
            war_goal = raiding_wargoal
            target = scope:target_neighbour
        }

    }
    option = {#not now
        name = c3rd_events.7.b
        custom_tooltip = c3rd_events.7.b.tt1
        if = {
            limit = {
                has_variable = unworthy_leader
                var:unworthy_leader > 1
            }
            change_variable = {
                name = unworthy_leader
                add = -1
            }
        }
        else_if = {
            limit = {
                has_variable = unworthy_leader
                var:unworthy_leader <= 1
            }
            remove_variable = unworthy_leader
        }
        set_variable = {
            name = recent_general_asking
            days = 1825 #5years
        }

        trigger_event = {
            id = c3rd_events.75
            days = 365
        }

    }
    option = {#no
        name = c3rd_events.7.c
        custom_tooltip = c3rd_events.7.c.tt1
        if = {
            limit = { has_variable = unworthy_leader}
            change_variable = {
                name = unworthy_leader
                add = 1
            }
        }
        else = {
            set_variable = {
                name = unworthy_leader
                value = 1
            }
        }
        set_variable = {
            name = recent_general_asking
            days = 1825 #5years
        }
        every_character = {
            limit = {
                is_general = yes
                loyalty < 75
                NOT = {
                    is_friend = root.current_ruler
                }
            }
            add_loyalty = disappointed
        }
        current_ruler = {
            add_popularity = 10
        }
        if = {
            limit = { is_monarchy = yes }
            add_legitimacy = -5
        }
        hidden_effect = {
            random_list = {
                10 = {
                    modifier = {
                        add = 10
                        has_variable = unworthy_leader
                        var:unworthy_leader <= 2
                    }
                    modifier = {
                        add = 2
                        legitimacy >= 85
                    }
                }
                1 = {
                    modifier = {
                        add = var:unworthy_leader
                        has_variable = unworthy_leader
                    }
                    modifier = {
                        add = 1
                        legitimacy < 50
                    }
                    modifier = {
                        add = 1
                        legitimacy < 25
                    }
                    modifier = {
                        add = 2
                        legitimacy < 0
                    }
                    modifier = {
                        add = 2
                        stability < 25
                    }
                    trigger_event = {
                        id = c3rd_events.9
                        days = 15
                    }
                }
            }
        }
    }
}

c3rd_events.75 = { #not at war
    type = country_event
    title = "c3rd_events.75.t"
    desc = "c3rd_events.75.desc"

    picture = proscription

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        is_ai = no
        has_country_modifier = crisis_of_the_third_century
        NOR = {
            has_country_modifier = military_anarchy
            has_variable = recent_military_anarchy
            has_variable = on_going_rep_thingy
        }
        num_of_cities >= 900
        NOR = {
            war_with = scope:target_neighbour
            scope:target_neighbour = {
                has_truce_with = root
            }
            scope:target_neighbour = {
                is_subject_of = root
            }
        }
        scope:target_neighbour = {
            has_land = yes
        }

    }

    left_portrait = current_ruler
    right_portrait = scope:general_leader

    immediate = {
        if = {
            limit = { has_variable = unworthy_leader}
            change_variable = {
                name = unworthy_leader
                add = 3 #because -1 before
            }
        }
        else = {
            set_variable = {
                name = unworthy_leader
                value = 2
            }
        }
        every_character = {
            limit = {
                is_general = yes
                loyalty < 75
                NOT = {
                    is_friend = root.current_ruler
                }
            }
            add_loyalty = disappointed
        }
    }

    option = {#oh noes
        name = c3rd_events.75.a
        custom_tooltip = c3rd_events.75.a.tt1
        hidden_effect = {
            random_list = {
                10 = {
                    modifier = {
                        add = 10
                        has_variable = unworthy_leader
                        var:unworthy_leader <= 2
                    }
                    modifier = {
                        add = 2
                        is_monarchy = yes
                        legitimacy >= 85
                    }
                }
                1 = {
                    modifier = {
                        add = var:unworthy_leader
                        has_variable = unworthy_leader
                    }
                    modifier = {
                        add = 1
                        legitimacy < 50
                    }
                    modifier = {
                        add = 1
                        legitimacy < 25
                    }
                    modifier = {
                        add = 2
                        legitimacy < 0
                    }
                    modifier = {
                        add = 2
                        stability < 25
                    }
                    trigger_event = {
                        id = c3rd_events.9
                        days = 15
                    }
                }
            }
        }
    }
}

c3rd_events.8 = { #Generals ask for a law
    type = country_event
    title = "c3rd_events.8.t"
    desc = "c3rd_events.8.desc"

    picture = successors

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        is_ai = no
        has_country_modifier = crisis_of_the_third_century
        manpower_percentage < 0.5
        NOR = {
            has_country_modifier = military_anarchy
            has_variable = recent_military_anarchy
            has_variable = recent_general_asking
            has_variable = on_going_rep_thingy
            has_country_modifier = military_advantages
            has_country_modifier = political_unstability
        }
        num_of_cities >= 900
        any_character = {
            count >= 3 #you should have a quite important military establishment
            is_general = yes
            is_mercenary = no
            loyalty < 75 #very loyal general will follow you to hell
            NOT = {
                is_friend = root.current_ruler
            }
        }
        has_civil_war = no

    }

    left_portrait = current_ruler
    right_portrait = scope:general_leader

    weight_multiplier = {
		modifier = {
			factor = 0.5
			towards_civil_war = yes
		}
		modifier = {
			factor = 0.5
			has_law = constantine_reform_law
		}
		modifier = {
			factor = 0.5
			has_law = decentralized_administration_law
		}
		modifier = {
			factor = 2
			has_war_exhaustion >= 10
		}
		modifier = {
			factor = 2
			manpower_percentage < 0.25
		}
		modifier = {
			factor = 1.5
			current_date >= 900.1.1
		}
		modifier = {
			factor = 1.2
			current_date >= 1000.1.1
		}
		modifier = {
			factor = 1.2
			current_date >= 1100.1.1
		}

    }

    immediate = {
        random_character = {
            limit = {
                is_general = yes
                is_mercenary = no
                loyalty < 75
                NOT = {
                    is_friend = root.current_ruler
                }
            }
            weight = {
                modifier = {
                    add = power_base
                }
            }
            save_scope_as = general_leader
        }

    }

    option = {
        name = c3rd_events.8.a
        custom_tooltip = c3rd_events.8.a.tt1
        add_country_modifier = {
            name = military_advantages
            duration = 3650
        }

    }
    option = {#No
        name = c3rd_events.8.b
        custom_tooltip = c3rd_events.8.b.tt1
        if = {
            limit = { has_variable = unworthy_leader}
            change_variable = {
                name = unworthy_leader
                add = 1
            }
        }
        else = {
            set_variable = {
                name = unworthy_leader
                value = 1
            }
        }
        set_variable = {
            name = recent_general_asking
            days = 1825
        }
        every_character = {
            limit = {
                is_general = yes
                loyalty < 75
                NOT = {
                    is_friend = root.current_ruler
                }
            }
            add_loyalty = disappointed
        }
        current_ruler = {
            add_popularity = 10
        }
        if = {
            limit = { is_monarchy = yes }
            add_legitimacy = 5
        }

    }
}

c3rd_events.81 = { #Only general with power ; he wants recognition
    type = country_event
    title = "c3rd_events.81.t"
    desc = "c3rd_events.81.desc"

    picture = army_desert

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        NOR = {
            has_country_modifier = military_anarchy
            has_variable = recent_military_anarchy
            has_variable = recent_general_asking
            has_variable = on_going_rep_thingy
            has_country_modifier = political_unstability
        }
        num_of_cities >= 900
        any_character = {
            count = 1
            is_general = yes
            is_mercenary = no
        }
        any_character = {
            is_general = yes
            is_mercenary = no
            loyalty < 60 #very loyal general will follow you to hell
            power_base >= 20
            NOT = {
                is_friend = root.current_ruler
            }
        }
        has_civil_war = no

    }

    left_portrait = current_ruler
    right_portrait = scope:general_leader

    weight_multiplier = {
		modifier = {
			factor = 0.5
			towards_civil_war = yes
		}
		modifier = {
			factor = 0.5
            has_country_modifier = military_advantages
		}
		modifier = {
			factor = 1.5
			stability >= 60
		}
		modifier = {
			factor = 1.5
			stability >= 70
		}
		modifier = {
			factor = 2
			war = yes
		}

    }

    immediate = {
        random_character = {
            limit = {
                is_general = yes
                is_mercenary = no
                loyalty < 60
                power_base >= 20
                NOT = {
                    is_friend = root.current_ruler
                }
            }
            save_scope_as = general_leader
        }

    }

    option = {#lets celebrate his feats
        name = c3rd_events.81.a
        custom_tooltip = c3rd_events.81.a.tt1
        add_stability = -10
        add_treasury = {
            value = has_monthly_income
            multiply = -10
        }
        scope:general_leader = {
            add_gold = {
                value = root.has_monthly_income
                multiply = 10
            }
            add_popularity = 50
            add_loyalty = honored_general
        }
        set_variable = {
            name = recent_general_asking
            days = 1825
        }

    }
    option = {#No
        name = c3rd_events.81.b
        custom_tooltip = c3rd_events.81.b.tt1
        if = {
            limit = { has_variable = unworthy_leader}
            change_variable = {
                name = unworthy_leader
                add = 1
            }
        }
        else = {
            set_variable = {
                name = unworthy_leader
                value = 1
            }
        }
        set_variable = {
            name = recent_general_asking
            days = 1825
        }
        scope:general_leader = {
            add_loyalty = disappointed
        }
        current_ruler = {
            add_popularity = 10
        }
        if = {
            limit = { is_monarchy = yes }
            add_legitimacy = 5
        }
        hidden_effect = {
            random_list = {
                10 = {
                    modifier = {
                        add = 10
                        has_variable = unworthy_leader
                        var:unworthy_leader <= 2
                    }
                    modifier = {
                        add = 2
                        is_monarchy = yes
                        legitimacy >= 85
                    }
                }
                1 = {
                    modifier = {
                        add = var:unworthy_leader
                        has_variable = unworthy_leader
                    }
                    modifier = {
                        add = 1
                        legitimacy < 50
                    }
                    modifier = {
                        add = 1
                        legitimacy < 25
                    }
                    modifier = {
                        add = 2
                        legitimacy < 0
                    }
                    modifier = {
                        add = 2
                        stability < 25
                    }
                    trigger_event = {
                        id = c3rd_events.9
                        days = 15
                    }
                }
            }
        }

    }
}

c3rd_events.9 = { #Assassination of the ruler by the generals
    type = country_event
    title = "c3rd_events.9.t"
    desc = {
        desc = "c3rd_events.9.desc"
        triggered_desc = {
            trigger = {
                is_republic = yes
            }
            desc = "c3rd_events.9.desc.1"

        }
        triggered_desc = {
            trigger = {
                is_monarchy = yes
                scope:general_leader = {
                    NOT = {has_character_modifier = political_power_character}
                }
            }
            desc = "c3rd_events.9.desc.2"
        }
        triggered_desc = {
            trigger = {
                is_monarchy = yes
                scope:general_leader = {
                    has_character_modifier = political_power_character
                }
            }
            desc = "c3rd_events.9.desc.3"
        }
    }

    picture = assassination

    trigger = {
        has_land = yes
        is_tribal = no
        is_ai = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        NOR = { #just in case, but should not come here anyway
            has_country_modifier = military_anarchy
            has_variable = recent_military_anarchy
            has_variable = on_going_rep_thingy
            has_country_modifier = political_unstability
        }
        current_ruler = {
            popularity < 85
        }
        num_of_cities >= 900
        any_character = {
            count >= 1 #you should have at least a general not the primary heir
            is_general = yes
            is_mercenary = no
            is_primary_heir = no
            is_ruler = no
            loyalty < 50 #need at least some unloyal ones
            NOT = {
                is_friend = root.current_ruler
            }
        }

    }

    left_portrait = current_ruler
    right_portrait = scope:general_leader

    immediate = {
        current_heir = {
            save_scope_as = current_heir_last
        }
        random_character = {
            limit = {
                is_general = yes
                is_mercenary = no
                loyalty <= 50
                is_primary_heir = no
                is_ruler = no
            }
            weight = {
                modifier = {
                    add = power_base
                }
                modifier = {
                    factor = 100
                    has_character_modifier = political_power_character
                    loyalty <= 33
                }
            }
            save_scope_as = general_leader
        }
        current_ruler = {
            save_scope_as = assa_ruler
            death = {
                death_reason = death_execution
                killer = scope:general_leader
            }
        }
        add_stability = -10
        if = {
            limit = {is_monarchy = yes }
            add_country_modifier = {
                name = military_anarchy
                duration = 9125 #25y
            }
            set_variable = {
                name = recent_military_anarchy
                days = 18000 #50 years
            }
            scope:general_leader = {
                add_character_modifier = {
                    name = king_maker
                    duration = 7300
                }
            }
        }
        if = {
            limit = {
                has_variable = unworthy_leader
            }
            remove_variable = unworthy_leader
        }
    }

    option = {#ok
        trigger = {
            scope:general_leader = {
                NOT = {has_character_modifier = political_power_character}
            }
        }
        name = c3rd_events.9.a
        custom_tooltip = c3rd_events.9.a.tt1
    }
    option = {#ok + he takes pwer
        trigger = {
            scope:general_leader = {
                has_character_modifier = political_power_character
            }
        }
        name = c3rd_events.9.b
        custom_tooltip = c3rd_events.9.b.tt1
        set_as_ruler = scope:general_leader
        add_legitimacy = -25
        add_tyranny = 10
        add_political_influence = 25
        scope:general_leader = {
            add_corruption = 10
        }
        every_character = {
            limit = {
                NOR = {
                    this = scope:general_leader
                    is_friend = scope:general_leader
                }
                OR = {
                    this = scope:current_heir_last
                    has_character_modifier = political_power_character
                }
            }
            add_loyalty = political_coup
        }
    }

    after = {
        if = {
            limit = {
                is_republic = yes
            }
            set_variable = {
                name = on_going_rep_thingy
                days = 600
            }
            trigger_event = {
                id = c3rd_events.40
                days = 20
            }
        }
    }

}


#Rival empire split


c3rd_events.10 = { #oh no rival splitting
    type = country_event
    title = "c3rd_events.10.t"
    desc = "c3rd_events.10.desc"

    picture = romans_marching

    trigger = {
        has_country_modifier = military_anarchy
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1

    }
    right_portrait = scope:rival_emperor


    immediate = {
        hidden_effect = {
            random_legion = {
                limit = {
                    any_legion_unit = {
                        has_commander = yes
                        commander = scope:rival_emperor
                    }
                }
                random_legion_unit = {
                    limit = {
                        has_commander = yes
                        commander = scope:rival_emperor
                    }
                    save_scope_as = emperor_legion
                }
            }
            scope:rival_base_prov = {
                create_country = {
                    save_scope_as = rival_empire
                    if = {
                        limit = { NOT = {primary_culture = scope:rival_emperor.culture}}
                        set_primary_culture = scope:rival_emperor.culture
                    }
                    change_government = dictatorship
                    change_law = work_for_the_best
                }
            }
            every_subject = {
                limit = {
                    is_subject_type = client_state
                    has_subject_loyalty < 35
                }
                root = {
                    release_subject = prev
                }
                scope:rival_empire = {
                    make_subject = {
                        target = scope:chosen_subject
                        type = client_state
                    }
                }

            }
            every_subject = {
                limit = {
                    is_subject_type = feudatory
                    has_subject_loyalty < 35
                }
                root = {
                    release_subject = prev
                }
                scope:rival_empire = {
                    make_subject = {
                        target = scope:chosen_subject
                        type = feudatory
                    }
                }

            }
            # every_legion = {
            #     limit = {
            #         any_legion_unit = {
            #             exists = commander
            #             commander = scope:rival_emperor
            #         }
            #         move_legion = scope:rival_empire.capital_scope.governorship
            #     }
            # }
            every_governorships = {
                limit = {
                    is_in_list = other_empire_governorship
                    legion = {
                        NOT = {
                            any_legion_unit = {
                                has_commander = yes
                                commander = {is_disloyal = no}
                            }
                        }
                    }
                }
                legion = {
                    move_legion = scope:rival_empire.capital_scope.governorship
                }
            }
            every_owned_province = {
                limit = {
                    governorship = {
                        is_in_list = other_empire_governorship
                    }
                }
                set_owned_by = scope:rival_empire
            }
            scope:rival_emperor = {
                remove_all_positions = yes
                move_country = scope:rival_empire
                set_home_country = scope:rival_empire
                remove_character_modifier = foreign_citizen
                spouse = {
                    remove_all_positions = yes
                    move_country = scope:rival_empire
                    set_home_country = scope:rival_empire
                    remove_character_modifier = foreign_citizen
                }
                every_child = {
                    limit = {
                        prisoner = no
                    }
                    remove_all_positions = yes
                    move_country = scope:rival_empire
                    set_home_country = scope:rival_empire
                    remove_character_modifier = foreign_citizen
                }
            }
            every_character = {
                limit = {
                    is_in_list = other_empire_govs
                }
                remove_all_positions = yes
                move_country = scope:rival_empire
                set_home_country = scope:rival_empire
                remove_character_modifier = foreign_citizen
                spouse = {
                    remove_all_positions = yes
                    move_country = scope:rival_empire
                    set_home_country = scope:rival_empire
                    remove_character_modifier = foreign_citizen
                }
                every_child = {
                    limit = {
                        prisoner = no
                    }
                    remove_all_positions = yes
                    move_country = scope:rival_empire
                    set_home_country = scope:rival_empire
                    remove_character_modifier = foreign_citizen
                }
            }
            scope:rival_empire = {
                set_as_ruler = scope:rival_emperor
                add_military_experience_to_new_country_effect = yes
                set_variable = {
                    name = mother_empire
                    value = root
                }
                set_variable = {
                    name = unification_value
                    value = 0
                    days = 36500
                }
                add_opinion = {
                    modifier = empire_rivals
                    target = root
                }
                random_character = {
                    limit = {
                        wealth > 30
                        is_ruler = no
                    }
                    weight = {
                        modifier = {
                            add = martial
                        }
                    }
                    save_scope_as = rival_commander

                }
                if = {
                    limit = {
                        NOT = {
                            any_army = {
                                has_legion_trigger = yes
                                legion = ROOT.capital_scope.governorship.legion
                            }
                        }
                    }
                    hidden_effect = {
                        capital_scope.governorship = {
                            raise_legion = {
                                create_unit = {
                                    location = scope:rival_base_prov
                                    add_relevant_loyal_subunit_effect = yes
                                    save_scope_as = rival_legion
                                }
                                if = {
                                    limit = {
                                        scope:rival_commander = {
                                            exists = yes
                                        }
                                    }
                                    add_commander = scope:rival_commander
                                }
                            }
                        }
                    }
                }
                else = {
                    hidden_effect ={
                        random_army = {
                            limit = {
                                has_legion_trigger = yes
                                legion = ROOT.capital_scope.governorship.legion
                            }
                            save_scope_as = rival_legion
                        }
                    }
                }
                set_local_variable = {
                    name = legion_size
                    value = 0
                }
                every_character = {
                    limit = {
                        num_loyal_veterans > 0
                    }
                    change_local_variable = {
                        name = legion_size
                        add = num_loyal_veterans
                    }
                    add_loyal_veterans = {
                        value = 0
                        subtract = num_loyal_veterans
                    }
                }
                change_local_variable = {
                    name = legion_size
                    add = scope:rival_emperor.num_loyal_veterans
                }
                change_local_variable = {
                    name = legion_size
                    add = scope:emperor_legion.unit_size
                }
                scope:emperor_legion = {destroy_unit = yes}
                scope:rival_legion = {
                    set_as_commander = scope:rival_commander
                    while = {
                        limit = {
                            local_var:legion_size > 0
                            scope:rival_commander.wealth > 30
                        }
                        add_relevant_loyal_subunit_effect = yes
                        commander = {
                            add_gold = 20
                        }
                        scope:rival_emperor = {#unit creation is paid by the ruler
                            add_gold = -20
                        }
                        change_local_variable = {
                            name = legion_size
                            subtract = 1
                        }


                    }
                }

            }
            set_local_variable = {
                name = rival_size
                value = scope:rival_empire.num_of_provinces
            }
            change_local_variable = {
                name = rival_size
                multiply = 3
            }
            add_opinion = {
                modifier = empire_rivals
                target = scope:rival_empire
            }

        }



    }

    option = { #WAR
        name = c3rd_events.10.a
        custom_tooltip = c3rd_events.10.a.tt1
        declare_war_with_wargoal = {
            war_goal = imperial_conquest_wargoal
            target = scope:rival_empire
        }
    }

    option = { #leave them for now
        name = c3rd_events.10.b
        custom_tooltip = c3rd_events.10.b.tt1
    }


    option = { #more unification step them
        name = c3rd_events.10.c
        custom_tooltip = c3rd_events.10.c.tt1
        trigger = {
            num_of_provinces > local_var:rival_size
        }
        highlight = yes
        add_political_influence = -40
        scope:rival_empire = {
            change_variable = {
                name = unification_value
                add = 20
            }
        }

    }

    after = { #clean
        every_governorships = {
            limit = {
                is_in_list = other_empire_governorship
            }
            remove_from_list = other_empire_governorship
        }
        scope:rival_empire = {
            every_character = {
                limit = {
                    is_in_list = other_empire_govs
                }
                remove_from_list = other_empire_govs
            }
        }
    }

}

c3rd_events.11 = { #reunification from split
    type = country_event
    title = "c3rd_events.11.t"
    desc = "c3rd_events.11.desc"

    picture = senate_debate

    trigger = {
        has_variable  = mother_empire
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1

    }
    immediate = {
        save_scope_as = reunification
        var:mother_empire = {
            save_scope_as = moma_wait_for_me
        }
    }

    option = {#no problem

        name = c3rd_events.11.a
        custom_tooltip = c3rd_events.11.a.tt1
        var:mother_empire = {
            trigger_event = {
                id = c3rd_events.12
                days = 1
            }
        }
    }
    option = {#players can choose to not die
        trigger = {
            is_ai = no
        }
        name = c3rd_events.11.b
        custom_tooltip = c3rd_events.11.b.tt1
        add_stability = -5

    }
}


c3rd_events.12 = { #reunification from mother
    type = country_event
    title = "c3rd_events.12.t"
    desc = "c3rd_events.12.desc"

    picture = senate_debate

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1

    }
    immediate = {
        scope:reunification = {
            current_ruler = {
                remove_all_positions = yes
                move_country = root
                set_home_country = root
                remove_character_modifier = foreign_citizen
                spouse = {
                    remove_all_positions = yes
                    move_country = root
                    set_home_country = root
                    remove_character_modifier = foreign_citizen
                }
                every_child = {
                    limit = {
                        prisoner = no
                    }
                    remove_all_positions = yes
                    move_country = root
                    set_home_country = root
                    remove_character_modifier = foreign_citizen
                }
            }
        }
    }

    option = {#yay, welcome back
        name = c3rd_events.12.a
        custom_tooltip = c3rd_events.12.a.tt1
        scope:reunification = {
            every_character = {
                remove_all_positions = yes
                move_country = root
                set_home_country = root
                remove_character_modifier = foreign_citizen
                spouse = {
                    remove_all_positions = yes
                    move_country = root
                    set_home_country = root
                    remove_character_modifier = foreign_citizen
                }
                every_child = {
                    limit = {
                        prisoner = no
                    }
                    remove_all_positions = yes
                    move_country = root
                    set_home_country = root
                    remove_character_modifier = foreign_citizen
                }
            }
            every_owned_province = {
                set_owned_by = root
            }
        }
    }
    option = {#
        name = c3rd_events.12.b
        custom_tooltip = c3rd_events.12.b.tt1
        current_ruler = { add_popularity = -20 }
        scope:reunification = {
            every_character = {
                death = {
                    death_reason = death_execution
                    killer = root.current_ruler
                }
            }
            every_owned_province = {
                set_owned_by = root
            }

        }


    }

}

c3rd_events.13 = { #reunification failed this time
    type = country_event
    title = "c3rd_events.13.t"
    desc = {
        desc = "c3rd_events.13.desc"
        triggered_desc = {
            trigger = {
                scope:rival_empire = {
                    var:unification_value < 20
                }
            }
            desc = "c3rd_events.13.desc.1"

        }
        triggered_desc = {
            trigger = {
                scope:rival_empire = {
                    var:unification_value < 50
                    var:unification_value > 20
                }
            }
            desc = "c3rd_events.13.desc.2"

        }
        triggered_desc = {
            trigger = {
                scope:rival_empire = {
                    var:unification_value < 120
                    var:unification_value > 50
                }
            }
            desc = "c3rd_events.13.desc.3"

        }
        triggered_desc = {
            trigger = {
                scope:rival_empire = {
                    var:unification_value > 120
                }
            }
            desc = "c3rd_events.13.desc.4"

        }

    }
    right_portrait = scope:rival_empire.current_ruler

    picture = successors

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1

    }

    option = {#too bad
        name = c3rd_events.13.a
        custom_tooltip = c3rd_events.13.a.tt1
        #add_treasury = scope:rival_empire.var:unification_value #VALUE DEBUG CHECK
    }

}
c3rd_events.14 = { #reunification window ended, empire stay splitted
    type = country_event
    title = "c3rd_events.14.t"
    desc = "c3rd_events.14.desc"

    picture = successors

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1

    }
    right_portrait = scope:rival_empire.current_ruler

    option = {#fack
        name = c3rd_events.14.a
        custom_tooltip = c3rd_events.14.a.tt1
    }

}

c3rd_events.15 = {#civilwar aid
    type = country_event
    title = "c3rd_events.15.t"
    desc = "c3rd_events.15.desc"

    picture = senator_conversing
    right_portrait = scope:rival_empire.current_ruler
    trigger = {
        scope:rival_empire = {exists = yes}
    }
    option = {
        name = c3rd_events.15.a
        custom_tooltip = c3rd_events.15.a.tt1
        add_political_influence = -25
        hidden_effect = {
            scope:rival_empire = {
                every_character = {
                    limit = {is_disloyal = yes}
                    add_loyalty = loyalty_inspired_mother
                }
                change_variable = {
                    name = unification_value
                    add = 10
                }
            }

        }

    }
    option = {
        name = c3rd_events.15.b
        custom_tooltip = c3rd_events.15.b.tt1
        current_ruler = {
            add_popularity = 20
        }
    }
}


c3rd_events.16 = {#war aid
    type = country_event
    title = "c3rd_events.16.t"
    desc = "c3rd_events.16.desc"

    picture = senator_conversing
    right_portrait = scope:rival_empire.current_ruler
    trigger = {
        scope:rival_empire = {exists = yes}
    }

    option = {
        name = c3rd_events.16.a
        custom_tooltip = c3rd_events.16.a.tt1
        hidden_effect = {
            scope:rival_empire = {
                change_variable = {
                    name = unification_value
                    add = 20
                }
            }

        }
        if = {
            limit = {
                scope:rival_empire_war = {
                    any_war_attacker = {
                        this = scope:rival_empire
                    }
                }
            }
            add_to_war = {
                target = scope:rival_empire_war
                attacker = yes
            }
        }
        else_if = {
            limit = {
                scope:rival_empire_war = {
                    any_war_defender = {
                        this = scope:rival_empire
                    }
                }
            }
            add_to_war = {
                target = scope:rival_empire_war
                attacker = no
            }
        }
    }
    option = {
        name = c3rd_events.16.b
        custom_tooltip = c3rd_events.16.b.tt1
        add_stability = 5
    }
}


c3rd_events.17 = {#stability aid
    type = country_event
    title = "c3rd_events.17.t"
    desc = "c3rd_events.17.desc"

    picture = senator_conversing
    right_portrait = scope:rival_empire.current_ruler
    trigger = {
        scope:rival_empire = {exists = yes}
    }

    option = {
        name = c3rd_events.17.a
        custom_tooltip = c3rd_events.17.a.tt1
        add_stability = -5
        hidden_effect = {
            scope:rival_empire = {
                add_country_modifier = {
                    name = stability_boosted_mother
                    duration = 365
                }
                change_variable = {
                    name = unification_value
                    add = 10
                }
            }

        }
    }
    option = {
        name = c3rd_events.17.b
        custom_tooltip = c3rd_events.17.b.tt1
        add_legitimacy = 10
    }
}


c3rd_events.18 = {#legitimity intervention
    type = country_event
    title = "c3rd_events.18.t"
    desc = "c3rd_events.18.desc"

    picture = senator_conversing
    right_portrait = scope:rival_empire.current_ruler
    trigger = {
        scope:rival_empire = {exists = yes}
    }

    option = {
        name = c3rd_events.18.a
        custom_tooltip = c3rd_events.18.a.tt1
        hidden_effect = {
            scope:rival_empire = {
                change_variable = {
                    name = unification_value
                    add = 15
                }
            }

        }
        add_treasury = {
            value = has_monthly_income
            multiply = -5
        }
    }
    option = {
        name = c3rd_events.18.b
        custom_tooltip = c3rd_events.18.b.tt1
        add_political_influence = 10
    }
}



c3rd_events.19 = {#mother is dead
    type = country_event
    title = "c3rd_events.19.t"
    desc = "c3rd_events.19.desc"

    picture = senate_debate
    trigger = {
        has_variable = mother_empire
        has_variable = unification_value
        var:mother_empire = { has_land = no }
    }

    immediate = {
        remove_variable = mother_empire
        remove_variable = unification_value
    }

    option = {
        name = c3rd_events.19.a
        custom_tooltip = c3rd_events.19.a.tt1
        add_stability = 10
    }
}

c3rd_events.20 = {#mother is dead
    type = country_event
    title = "c3rd_events.20.t"
    desc = "c3rd_events.20.desc"

    picture = senate_debate

    option = {
        name = c3rd_events.20.a
        custom_tooltip = c3rd_events.20.a.tt1
        add_stability = 10
    }
}


c3rd_events.21 = {#governorship defects to rival empire
    type = country_event
    title = "c3rd_events.21.t"
    desc = "c3rd_events.21.desc"

    picture = successors
    trigger = {
        any_neighbour_country = {
            has_variable = mother_empire
            var:mother_empire = root
        }
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        NOT = {
            has_variable = recent_gov_defect
        }
        any_owned_province = {
            exists = governor
            governor = {
                OR = {
                    loyalty <= 15
                    AND = {
                        root = {has_civil_war = yes}
                        loyalty <= 30
                    }
                }
                NOR = {
                    has_variable = defection_prevented
                    is_friend = ruler
                }
            }
            any_neighbor_province = {
                owner = {
                    has_variable = mother_empire
                    var:mother_empire = root
                }
            }
        }

    }

    weight_multiplier = {
		modifier = {
			factor = 2
			towards_civil_war = yes
		}
        modifier = {
            factor = 2
            has_civil_war = yes
        }
		modifier = {
			factor = 1.5
			stability <= 40
		}
		modifier = {
			factor = 1.5
			stability <= 20
		}
		modifier = {
			factor = 2
			has_country_modifier = internal_collapse
		}
		modifier = {
			factor = 2
			has_country_modifier = solidus_introduced
		}

    }

    immediate = {
        random_neighbour_country = {
            limit = {
                has_variable = mother_empire
                var:mother_empire = root
            }
            save_scope_as = rival_empire_defect_to
        }

        random_owned_province = {
            limit = {
                exists = governor
                governor = {
                    OR = {
                        loyalty <= 15
                        AND = {
                            root = {has_civil_war = yes}
                            loyalty <= 30
                        }
                    }
                    NOR = {
                        has_variable = defection_prevented
                        is_friend = ruler
                    }
                }
                any_neighbor_province = {
                    owner = {
                        has_variable = mother_empire
                        var:mother_empire = root
                    }
                }
            }
            governorship = {
                save_scope_as = governorship_defect
            }
            governor = {
                save_scope_as = governor_defect
            }
        }
        set_variable = {
            name = recent_gov_defect
            days = 365
        }
    }

    option = {
        name = c3rd_events.21.a
        custom_tooltip = c3rd_events.21.a.tt1
        add_treasury = {
            value = has_monthly_income
            multiply = -10
        }
        scope:governor_defect = {
            add_loyalty = requests_fulfilled
            add_gold = {
                value = root.has_monthly_income
                multiply = 10
            }
            set_variable = {
                name = defection_prevented
                days = 3650
            }
        }
    }

    option = {
        name = c3rd_events.21.b
        custom_tooltip = c3rd_events.21.b.tt1
        add_legitimacy = -30
        scope:governor_defect = {
            add_loyalty = requests_fulfilled
            set_variable = {
                name = defection_prevented
                days = 3650
            }
        }
    }

    option = {
        name = c3rd_events.21.c
        custom_tooltip = c3rd_events.21.c.tt1
        add_stability = 5
        hidden_effect = {
            every_owned_province = {
                limit = {
                    governorship = scope:governorship_defect
                }
                set_owned_by = scope:rival_empire_defect_to
            }
            scope:governor_defect = {
                remove_all_positions = yes
                move_country = scope:rival_empire_defect_to
                set_home_country = scope:rival_empire_defect_to
                remove_character_modifier = foreign_citizen
            }
        }
    }
}

#Here come the monthly events where generals do whatever they want

c3rd_events.30 = {#general ultimatum : throne or rival empire
    type = country_event
    title = "c3rd_events.30.t"
    desc = "c3rd_events.30.desc"

    picture = proscription
    right_portrait = scope:rival_emperor
    trigger = {
        has_country_modifier = military_anarchy
        NOT= {has_variable = recent_ultimatum}
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        is_monarchy = yes
        any_character = {
            OR = {
                has_character_modifier = king_maker
                is_general = yes
            }
            OR = {
                is_disloyal = yes #If we're in civil war and he's under 45 even with the loyalist bonus (+15 in C3RD), it means he should have revolted and the civil war bugged. He count as disloyal anyway, and will jump on the occasion
                AND = {
                    loyalty <= 45
                    employer = {has_civil_war = yes}
                }
            }
            NOT = { is_friend = root.current_ruler }
            popularity >= 50
            is_ruler = no
            save_temporary_scope_as = ambitious_general
        }
        any_owned_province = {
            exists = governor
            governor = {
                OR = {
                    is_friend = scope:ambitious_general
                    this = scope:ambitious_general
                }
                NOT = {is_friend = root.current_ruler}
            }
            region = {
                any_neighbor_region = {
                    count >= 2
                    any_region_province = {
                        owner = root
                        OR = {
                            NOT = {exists = governor}
                            governor = {
                                OR = {
                                    is_friend = scope:ambitious_general
                                    OR = {
                                        is_disloyal = yes
                                        AND = {
                                            loyalty <= 45
                                            employer = {has_civil_war = yes}
                                        }
                                    }
                                    this = scope:ambitious_general
                                }
                                NOT = {is_friend = root.current_ruler}
                            }
                        }
                    }
                }
            }
        }

    }

    weight_multiplier = {
		modifier = {
			factor = 3
			towards_civil_war = yes
		}
		modifier = {
			factor = 2
			has_civil_war = yes
		}
        modifier = {
            factor = 2
            legitimacy < 0
        }
        modifier = {
            factor = 2
            legitimacy < 30
        }

    }

    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    governor = {
                        OR = {
                            any_friend = {
                                OR = {
                                    has_character_modifier = king_maker
                                    is_general = yes
                                }
                                employer = root
                                OR = {
                                    is_disloyal = yes
                                    AND = {
                                        loyalty <= 45
                                        employer = {has_civil_war = yes}
                                    }
                                }
                                popularity >= 50
                                is_ruler = no
                                NOT = { is_friend = root.current_ruler }
                                save_temporary_scope_as = ambitious_general
                            }
                            AND = {
                                has_character_modifier = king_maker
                                employer = root
                                OR = {
                                    is_disloyal = yes
                                    AND = {
                                        loyalty <= 45
                                        employer = {has_civil_war = yes}
                                    }
                                }
                                popularity >= 50
                                is_ruler = no
                                NOT = { is_friend = root.current_ruler }
                                save_temporary_scope_as = ambitious_general
                            }

                        }
                        NOT = {is_friend = root.current_ruler}
                    }
                    region = {
                        any_neighbor_region = {
                            count >= 2
                            any_region_province = {
                                owner = root
                                OR = {
                                    NOT = {exists = governor}
                                    governor = {
                                        OR = {
                                            is_friend = scope:ambitious_general
                                            OR = {
                                                is_disloyal = yes
                                                AND = {
                                                    loyalty <= 45
                                                    employer = {has_civil_war = yes}
                                                }
                                            }
                                            this = scope:ambitious_general
                                        }
                                        NOT = {is_friend = root.current_ruler}
                                    }
                                }

                            }
                        }
                    }

                }
                scope:ambitious_general = { save_scope_as = rival_emperor }
                save_scope_as = rival_base_prov
                region = {
                    every_neighbor_region = {
                        limit = {
                            any_region_province = {
                                owner = root
                                OR = {
                                    NOT = {exists = governor}
                                    governor = {
                                        OR = {
                                            is_friend = scope:ambitious_general
                                            OR = {
                                                is_disloyal = yes
                                                AND = {
                                                    loyalty <= 45
                                                    employer = {has_civil_war = yes}
                                                }
                                            }
                                            this = scope:ambitious_general
                                        }
                                        NOT = {is_friend = root.current_ruler}
                                    }
                                }
                                save_temporary_scope_as = prov_region_joining
                            }
                        }
                        random_region_province = {
                            limit = {
                                owner = root
                            }
                            governor = {
                                if = {
                                    limit = { NOT = {this = scope:rival_emperor} }
                                    add_to_list = other_empire_govs
                                }
                            }
                            governorship = {
                                add_to_list = other_empire_governorship
                            }
                        }
                    }
                }
                if = {
                    limit = { exists = governor }
                    governor = {
                        add_to_list = other_empire_govs
                    }
                }
                governorship = {
                    add_to_list = other_empire_governorship
                }
            }
            every_governorships = {
                limit = {
                    OR = {
                        NOT = {exists = governor}
                        governor = {
                            OR = {
                                is_friend = scope:ambitious_general
                                OR = {
                                    is_disloyal = yes
                                    AND = {
                                        loyalty <= 45
                                        employer = {has_civil_war = yes}
                                    }
                                }
                                this = scope:ambitious_general
                            }
                            NOT = {is_friend = root.current_ruler}
                        }
                    }
                    any_governorship_state = {
                        any_state_province = {
                            any_neighbor_province = {
                                governorship = {
                                    is_in_list = other_empire_governorship
                                }
                            }
                        }
                    }
                }
                add_to_list = other_empire_governorship
                if = {
                    limit = { exists = governor }
                    governor = {
                        add_to_list = other_empire_govs
                    }
                }

            }
            set_variable = {
                name = recent_ultimatum
                days = 365 #1 years
            }
        }
    }

    option = {
        name = c3rd_events.30.a
        custom_tooltip = c3rd_events.30.a.tt1
        add_stability = -7
        if = {
            limit = {
                num_of_cities >= 900
                has_variable = recent_military_anarchy
            }
            hidden_effect = {
                remove_variable = recent_military_anarchy
                set_variable = {
                    name = recent_military_anarchy
                    days = 18000 #50 years
                }
                remove_country_modifier = military_anarchy
            }
            add_country_modifier = {
                name = military_anarchy
                duration = 9125 #25y
            }
        }
        current_ruler = {
            save_scope_as = ex_ruler
        }
        set_as_ruler = scope:rival_emperor
        scope:rival_emperor = {
            if = {
                limit = {
                    not = {has_character_modifier = king_maker}
                }
                add_character_modifier = {
                    name = king_maker
                    duration = 7300
                }
            }
            else = {
                hidden_effect = {
                    remove_character_modifier = king_maker
                    add_character_modifier = {
                        name = king_maker
                        duration = 7300
                    }
                }
            }
        }
        every_character = {
            limit = {
                is_friend = scope:rival_emperor
            }
            add_loyalty = requests_fulfilled
        }
        scope:ex_ruler = {
            add_loyalty = deposed_king
        }
        trigger_event = {
            id = c3rd_other_events.11 #you should buy the loyalty of your fellow generals
            days = 15
        }

    }
    option = { #try to emprison him
        name = c3rd_events.30.b
        custom_tooltip = c3rd_events.30.b.tt1

        hidden_effect = {
            random_list = {#best case max legitimacy, 50 pop general = > 1/3 chance of emprisonning him. Still worth the try.
                1 = {#emprison him
                    modifier = {
                        add = legitimacy
                        legitimacy >= 0
                    }
                    trigger_event = {
                        id = c3rd_events.31
                        days = 6
                    }
                }
                50 = {#split empire gogogo
                    modifier = {
                        add = scope:rival_emperor.popularity
                    }
                    modifier = {
                        add = 20
                        scope:rival_emperor = {
                            any_friend = {
                                count >= 2
                                employer = root
                                is_governor = yes
                            }
                        }
                    }
                    trigger_event = {
                        id = c3rd_events.10
                        days = 6
                    }
                }
            }

        }
    }
}

c3rd_events.31 = {#emprison success
    type = country_event
    title = "c3rd_events.31.t"
    desc = "c3rd_events.31.desc"

    picture = roman_trial
    right_portrait = scope:rival_emperor

    immediate = {
        imprison = {target = scope:rival_emperor}
        every_character = {
            limit = {
                OR = {
                    is_in_list = other_empire_govs
                    is_friend = scope:rival_emperor
                }
            }
            add_loyalty = imposed_authority
            remove_from_list = other_empire_govs
        }
        every_governorships = {
            limit = {
                is_in_list = other_empire_governorship
            }
            remove_from_list = other_empire_governorship
        }
    }
    option = {
        name = c3rd_events.31.a
        custom_tooltip = c3rd_events.31.a.tt1
        add_stability = 5
        current_ruler = {
            add_popularity = 20
        }
        add_legitimacy = 10
    }
}


c3rd_events.32 = {#rival vs kingmaker
    type = country_event
    title = "c3rd_events.32.t"
    desc = "c3rd_events.32.desc"

    picture = assassination
    left_portrait = scope:king_maker_exige
    right_portrait = scope:king_maker_rival

    trigger = {
        has_country_modifier = military_anarchy
        NOT = {has_variable = recent_gen_rival}

        any_character = {
            is_ruler = no
            NOT = {
                has_character_modifier = king_maker
            }
            any_rival = {
                has_character_modifier = king_maker
                is_ruler = no
            }
        }
    }

    immediate = {
        random_character = {
            limit = {
                has_character_modifier = king_maker
                is_ruler = no
                any_rival = {
                    is_ruler = no
                }
            }
            save_scope_as = king_maker_exige
            random_rival = {
                limit = {
                    NOT = {
                        has_character_modifier = king_maker
                    }
                }
                save_scope_as = king_maker_rival
            }
        }
        set_variable = {
            name = recent_gen_rival
            days = 365 #1 years
        }
    }
    option = {
        name = c3rd_events.32.a
        custom_tooltip = c3rd_events.32.a.tt1
        scope:king_maker_exige = {
            add_popularity = 20
            add_corruption = 5
        }
        current_ruler = {
            add_corruption = 5
        }
        imprison = {
            target = scope:king_maker_rival
        }
        add_tyranny = 2
        add_legitimacy = -5
    }
    option = {
        name = c3rd_events.32.b
        custom_tooltip = c3rd_events.32.b.tt1
        current_ruler = {
            add_popularity = 10
        }
        scope:king_maker_exige = {
            add_loyalty = medium_requests_denied
            if = {
                limit = { is_friend = root.current_ruler }
                remove_friend = root.current_ruler
            }
        }
    }
}

c3rd_events.33 = {#general seek popularity
    type = country_event
    title = "c3rd_events.33.t"
    desc = "c3rd_events.33.desc"

    picture = senator_conversing
    left_portrait = scope:popular_general

    trigger = {
        has_country_modifier = military_anarchy
        NOT = {has_variable = recent_gen_pop}
        any_character = {
            is_general = yes
            is_ruler = no
            popularity < 70
            NOT = {has_variable = recent_gen_pop_char}
            OR = {
                any_friend = {
                    employer = root
                    is_governor = yes
                }
                AND = {
                    is_governor = yes
                    any_friend = {
                        has_any_office = yes
                    }
                }

            }
        }
    }

    weight_multiplier = {
        modifier = {
            factor = 1.5
            not = {
                any_character = {
                    has_character_modifier = king_maker
                }
            }
        }
        modifier = {
            factor = 2
            legitimacy < 25
        }
        modifier = {
            factor = 2
            legitimacy < 0
        }
        modifier = {
            factor = 2
            stability < 20
        }
        modifier = {
            factor = 2.5
            any_character = {
                count >= 10
                is_general = yes
            }
        }
    }

    immediate = {
        random_character = {
            limit = {
                is_general = yes
                is_ruler = no
                popularity < 70
                NOT = {has_variable = recent_gen_pop_char}
                OR = {
                    any_friend = {
                        employer = root
                        is_governor = yes
                    }
                    AND = {
                        is_governor = yes
                        any_friend = {
                            has_any_office = yes
                        }
                    }

                }
            }
            weight = {
                modifier = {
                    add = power_base
                }
            }
            save_scope_as = popular_general
        }
        set_variable = {
            name = recent_gen_pop
            days = 365 #1 years
        }
    }
    option = {
        name = c3rd_events.33.a
        custom_tooltip = c3rd_events.33.a.tt1
        scope:popular_general = {
            add_popularity = 30
            if = {
                limit = {
                    NOT = {
                        has_character_modifier = popular_general
                    }
                }
                add_character_modifier = {
                    name = popular_general
                    duration = 3650
                }
                set_variable = {
                    name = recent_gen_pop_char
                    days = 730 #2 years
                }
            }
        }
        current_ruler = {
            add_popularity = -10
        }
    }
    option = {
        name = c3rd_events.33.b
        custom_tooltip = c3rd_events.33.b.tt1
        add_political_influence = -10
        scope:popular_general = {
            add_loyalty = humiliated_general
            add_popularity = -10
            set_variable = {
                name = recent_gen_pop_char
                days = 1100 #3 years
            }
        }
    }
}

c3rd_events.34 = {#two generals clashing
    type = country_event
    title = "c3rd_events.34.t"
    desc = "c3rd_events.34.desc"

    picture = assassination
    left_portrait = current_ruler
    right_portrait = scope:general_one
    right_portrait = scope:general_two

    trigger = {
        has_country_modifier = military_anarchy
        NOT = {has_variable = recent_gen_clash}
        any_character = {
            is_general = yes
            is_ruler = no
            any_rival = {
                employer = root
                is_general = yes
            }
        }
    }
    weight_multiplier = {
        modifier = {
            factor = 2
            legitimacy < 25
        }
        modifier = {
            factor = 2
            stability < 20
        }
    }

    immediate = {
        random_character = {
            limit = {
                is_general = yes
                is_ruler = no
                any_rival = {
                    employer = root
                    is_general = yes
                    is_ruler = no
                }
            }
            save_scope_as = general_one
            random_rival = {
                limit = {
                    employer = root
                    is_general = yes
                    is_ruler = no
                }
                save_scope_as = general_two
            }
        }
        set_variable = {
            name = recent_gen_clash
            days = 365 #1 years
        }
    }
    option = {
        name = c3rd_events.34.a
        custom_tooltip = c3rd_events.34.a.tt1
        scope:general_one = {
            add_popularity = 10
            if = {
                limit = {
                    NOT = {
                        has_character_modifier = popular_general
                    }
                }
                add_character_modifier = {
                    name = popular_general
                    duration = 3650
                }
            }
        }
        scope:general_two = {
            add_popularity = 10
            if = {
                limit = {
                    NOT = {
                        has_character_modifier = popular_general
                    }
                }
                add_character_modifier = {
                    name = popular_general
                    duration = 3650
                }
            }
        }
        current_ruler = {
            add_popularity = 5
        }
    }
    option = {
        name = c3rd_events.34.b
        custom_tooltip = c3rd_events.34.b.tt1
        add_political_influence = -5
        scope:general_one = {
            add_popularity = 15
            if = {
                limit = {
                    NOT = {
                        has_character_modifier = popular_general
                    }
                }
                add_character_modifier = {
                    name = popular_general
                    duration = 3650
                }
            }
            add_loyalty = honored_general
        }
        scope:general_two = {
            add_popularity = -15
            add_loyalty = humiliated_general
            if = {
                limit = { is_friend = root.current_ruler }
                remove_friend = root.current_ruler
            }
        }
    }
    option = {
        name = c3rd_events.34.c
        custom_tooltip = c3rd_events.34.c.tt1
        add_political_influence = -5
        scope:general_two = {
            add_popularity = 15
            if = {
                limit = {
                    NOT = {
                        has_character_modifier = popular_general
                    }
                }
                add_character_modifier = {
                    name = popular_general
                    duration = 3650
                }
            }
            add_loyalty = honored_general
        }
        scope:general_one = {
            add_popularity = -15
            add_loyalty = humiliated_general
            if = {
                limit = { is_friend = root.current_ruler }
                remove_friend = root.current_ruler
            }
        }
    }
}

c3rd_events.35 = {#general ask a governorship
    type = country_event
    title = "c3rd_events.35.t"
    desc = "c3rd_events.35.desc"

    picture = senator_conversing
    left_portrait = current_ruler
    right_portrait = scope:asking_general
    right_portrait = scope:asking_friend

    trigger = {
        has_country_modifier = military_anarchy
        NOT = {has_variable = recent_gov_asked}
        any_character = {
            is_general = yes
            is_ruler = no
            popularity > 50
            wealth >= 600
            any_friend = {
                employer = root
                is_governor = no
                is_general = no
                is_mercenary = no
                has_any_office = no
                has_tech_office = no
                is_ruler = no
                prisoner = no
                trigger_if = {
                    limit = {
                        root = {
                            gender_equality = no
                        }
                    }
                    is_female = no
                }

            }
        }
    }
    weight_multiplier = {
        modifier = {
            factor = 2
            legitimacy < 25
        }
        modifier = {
            factor = 2
            stability < 25
        }
    }

    weight_multiplier = {
        modifier = {
            factor = 2
            any_character = {
                popularity >= 50
                is_general = yes
                power_base >= 15
                wealth >= 100
                any_friend = {
                    employer = root
                    is_governor = no
                    is_general = no
                    is_mercenary = no
                    has_any_office = no
                    has_tech_office = no
                    is_ruler = no
                    prisoner = no
                    trigger_if = {
                        limit = {
                            root = {
                                gender_equality = no
                            }
                        }
                        is_female = no
                    }
                }
            }
        }
    }

    immediate = {
        random_character = {
            limit = {
                is_general = yes
                is_ruler = no
                popularity > 50
                wealth >= 600
                any_friend = {
                    employer = root
                    is_governor = no
                    is_general = no
                    is_mercenary = no
                    has_any_office = no
                    has_tech_office = no
                    is_ruler = no
                    prisoner = no
                    trigger_if = {
                        limit = {
                            root = {
                                gender_equality = no
                            }
                        }
                        is_female = no
                    }
                }
            }
            save_scope_as = asking_general
            random_friend = {
                limit = {
                    employer = root
                    is_governor = no
                    is_general = no
                    is_mercenary = no
                    has_any_office = no
                    has_tech_office = no
                    is_ruler = no
                    prisoner = no
                    trigger_if = {
                        limit = {
                            root = {
                                gender_equality = no
                            }
                        }
                        is_female = no
                    }
                }
                save_scope_as = asking_friend
            }
        }
        random_governorships = {
            limit = {
                OR = {
                    governor = {
                        NOR = {
                            is_friend = scope:asking_general
                            this = scope:asking_friend
                            is_ruler = yes
                        }
                    }
                    NOT = {exists = governor}
                }
            }
            weight = {
                modifier = {
                    factor = 10
                    any_governorship_state = {
                        any_state_province = {
                            region = {
                                any_neighbor_region = {
                                    any_region_province = {
                                        owner = root
                                        exists = governor
                                        governor = {
                                            OR = {
                                                is_friend = scope:asking_general
                                                this = scope:asking_general
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                modifier = {
                    factor = 10
                    NOT = {exists = governor}
                }

            }
            save_scope_as = asked_governorship
        }
        set_variable = {
            name = recent_gov_asked
            days = 365 #2 years
        }
    }
    option = {
        name = c3rd_events.35.a
        custom_tooltip = c3rd_events.35.a.tt1
        scope:asked_governorship = {
            random_governorship_state = {
                random_state_province = {
                    set_as_governor = scope:asking_friend
                }
            }
        }
        scope:asking_general = {
            add_loyalty = requests_fulfilled
            add_corruption = 10
            add_gold = -1000
        }
        scope:asking_friend = {
            add_loyalty = requests_fulfilled
        }
        current_ruler = {
            add_popularity = -10
            add_corruption = 10
            add_gold = 500
        }
        add_treasury = 500
    }
    option = {
        name = c3rd_events.35.b
        custom_tooltip = c3rd_events.35.b.tt1
        current_ruler = {
            add_popularity = 10
        }
        scope:asking_general = {
            add_loyalty = medium_requests_denied
            if = {
                limit = { is_friend = root.current_ruler }
                remove_friend = root.current_ruler
            }
        }
    }
}

c3rd_events.36 = {#general is pretty powerful, gain king maker
    type = country_event
    title = "c3rd_events.36.t"
    desc = "c3rd_events.36.desc"

    picture = senator_conversing
    left_portrait = current_ruler
    right_portrait = scope:new_king_maker

    trigger = {
        has_country_modifier = military_anarchy
        NOT = {has_variable = recent_new_king_maker}
        any_character = {
            is_general = yes
            is_ruler = no
            NOT = {
                has_character_modifier = king_maker
            }
            popularity > 45
            OR = {
                power_base >= 5 #please be somewhat powerful
                any_friend = {
                    power_base >= 10
                }
            }
            any_friend = {
                count >= 2
                OR = {
                    is_governor = yes
                    has_any_office = yes
                }
            }
        }
    }

    weight_multiplier = { #there must always be a king maker
        modifier = {
            factor = 10
            NOT = {
                any_character = {
                    has_character_modifier = king_maker
                }
            }
        }
        modifier = {
            factor = 2
            legitimacy < 25
        }
        modifier = {
            factor = 2
            legitimacy < 0
        }
        modifier = {
            factor = 2
            stability < 20
        }
        modifier = {
            factor = 2
            any_character = {
                count >= 10
                is_general = yes
            }
            any_character = {
                count < 2
                has_character_modifier = king_maker
            }
        }
        modifier = {
            factor = 2
            any_character = {
                count >= 20
                is_general = yes
            }
            any_character = {
                count < 3
                has_character_modifier = king_maker
            }
        }
    }

    immediate = {
        random_character = {
            limit = {
                is_general = yes
                is_ruler = no
                NOT = {
                    has_character_modifier = king_maker
                }
                popularity > 45
                OR = {
                    power_base >= 5 #please be somewhat powerful
                    any_friend = {
                        power_base >= 10
                    }
                }
                any_friend = {
                    count >= 2
                    OR = {
                        is_governor = yes
                        has_any_office = yes
                    }
                }
            }
            weight = {
                modifier = {
                    add = power_base
                }
            }
            add_character_modifier = {
                name = king_maker
                duration = 7300
            }
            save_scope_as = new_king_maker
        }
        set_variable = {
            name = recent_new_king_maker
            days = 730 #2 years
        }
    }
    option = {
        name = c3rd_events.36.a
        custom_tooltip = c3rd_events.36.a.tt1
        add_legitimacy = -15
        scope:new_king_maker = {
            add_loyalty = honored_general
            add_popularity = 10
        }
    }
    option = {
        name = c3rd_events.36.b
        custom_tooltip = c3rd_events.36.b.tt1
        add_stability = -2
        scope:new_king_maker = {
            add_loyalty = humiliated_powerful_general
            add_popularity = -50
        }
        add_political_influence = -30
    }
}


c3rd_events.37 = {#two kings maker clashes
    type = country_event
    title = "c3rd_events.37.t"
    desc = "c3rd_events.37.desc"

    picture = assassination
    left_portrait = current_ruler
    right_portrait = scope:rival_one
    right_portrait = scope:rival_two

    trigger = {
        has_country_modifier = military_anarchy
        NOT = {has_variable = recent_king_maker_clash}
        any_character = {
            has_character_modifier = king_maker
            is_ruler = no
            power_base > 5 #please be somewhat powerful
            any_rival = {
                employer = root
                has_character_modifier = king_maker
                is_ruler = no
                power_base > 5
            }
        }
    }
    immediate = {
        set_local_variable = {
            name = loyal_vet
            value = num_of_provinces
        }
        change_local_variable = {
            name = loyal_vet
            divide = 4
        }
        random_character = {
            limit = {
                has_character_modifier = king_maker
                is_ruler = no
                power_base > 5 #please be somewhat powerful
                any_rival = {
                    employer = root
                    has_character_modifier = king_maker
                    is_ruler = no
                    power_base > 5
                }
            }
            save_scope_as = rival_one
            add_loyal_veterans = local_var:loyal_vet
            random_rival = {
                limit = {
                    employer = root
                    has_character_modifier = king_maker
                    is_ruler = no
                    power_base > 5
                }
                save_scope_as = rival_two
                add_loyal_veterans = local_var:loyal_vet
            }
        }
        set_variable = {
            name = recent_king_maker_clash
            days = 730 #2 years
        }

    }
    option = {
        name = c3rd_events.37.a
        custom_tooltip = c3rd_events.37.a.tt1
        add_legitimacy = -15
        scope:rival_one = {
            add_popularity = 10
        }
        scope:rival_two = {
            add_popularity = 10
        }
    }
    option = {
        name = c3rd_events.37.b
        custom_tooltip = c3rd_events.37.b.tt1
        scope:rival_one = {
            add_popularity = 15
        }
        scope:rival_two = {
            add_popularity = -20
            add_loyalty = humiliated_general
        }
        current_ruler = {
            add_popularity = -10
        }
    }
    option = {
        name = c3rd_events.37.c
        custom_tooltip = c3rd_events.37.c.tt1
        scope:rival_two = {
            add_popularity = 15
        }
        scope:rival_one = {
            add_popularity = -20
            add_loyalty = humiliated_general
        }
        current_ruler = {
            add_popularity = -10
        }
    }
}


c3rd_events.38 = {#two kings maker fight
    type = country_event
    title = "c3rd_events.38.t"
    desc = "c3rd_events.38.desc"

    picture = persia_marching
    left_portrait = current_ruler
    right_portrait = scope:rival_one
    right_portrait = scope:rival_two

    trigger = {
        has_country_modifier = military_anarchy
        NOT = {has_variable = recent_king_maker_fight}
        any_character = {
            has_character_modifier = king_maker
            is_ruler = no
            power_base > 10 #please be somewhat powerful
            popularity > 75
            any_rival = {
                employer = root
                has_character_modifier = king_maker
                is_ruler = no
                power_base > 10
                popularity > 75
            }
        }
    }
    immediate = {
        set_local_variable = {
            name = loyal_vet
            value = num_of_provinces
        }
        change_local_variable = {
            name = loyal_vet
            divide = 2
        }
        random_character = {
            limit = {
                has_character_modifier = king_maker
                is_ruler = no
                power_base > 5 #please be somewhat powerful
                any_rival = {
                    employer = root
                    has_character_modifier = king_maker
                    is_ruler = no
                    power_base > 10
                    popularity > 60
                }
            }
            save_scope_as = rival_one
            random_rival = {
                limit = {
                    employer = root
                    has_character_modifier = king_maker
                    is_ruler = no
                    power_base > 10
                    popularity > 60
                }
                save_scope_as = rival_two
            }
        }
        set_variable = {
            name = recent_king_maker_fight
            days = 730 #2 years
        }
        add_legitimacy = -25
        add_stability = -10
        if = {
            limit = {scope:rival_one.power_base >= scope:rival_two.power_base }
            scope:rival_two = {
                death = {
                    death_reason = death_battle
                    killer = scope:rival_one
                }
            }
            scope:rival_one = {
                add_loyal_veterans = local_var:loyal_vet
                add_popularity = 20
                save_scope_as = winner
            }
        }
        else = {
            scope:rival_one = {
                death = {
                    death_reason = death_battle
                    killer = scope:rival_two
                }
            }
            scope:rival_two = {
                add_loyal_veterans = local_var:loyal_vet
                add_popularity = 20
                save_scope_as = winner
            }

        }


    }
    option = {
        name = c3rd_events.38.a
        custom_tooltip = c3rd_events.38.a.tt1
    }
}

c3rd_events.39 = {#king maker have no office
    type = country_event
    title = "c3rd_events.39.t"
    desc = "c3rd_events.39.desc"

    picture = senator_conversing
    left_portrait = current_ruler
    right_portrait = scope:king_maker_unhappy

    trigger = {
        has_country_modifier = military_anarchy
        NOT = {has_variable = recent_king_maker_plot}
        any_character = {
            has_character_modifier = king_maker
            is_ruler = no
            wealth >= 1000 #please be somewhat powerful
            is_governor = no
            has_any_office = no
            has_tech_office = no
            is_general = no
        }
    }
    immediate = {

        random_character = {
            limit = {
                has_character_modifier = king_maker
                is_ruler = no
                wealth >= 1000 #please be somewhat powerful
                is_governor = no
                has_any_office = no
                has_tech_office = no
            }
            save_scope_as = king_maker_unhappy
            add_loyal_veterans = num_of_provinces
            add_gold = -1000
            add_loyalty = humiliated_powerful_general
            add_popularity = 30
        }
        while = {
            limit = {
                scope:king_maker_unhappy = {
                    wealth > 1000
                }
            }
            random_character = {
                limit = {
                    is_governor = yes
                    loyalty > 30
                }
                weight = {
                    modifier = {
                        factor = 10
						employer = {
							any_owned_province = {
								exists = governor
								governor = {
									this = prevprevprev
								}
								region = {
									any_neighbor_region = {
										any_region_province = {
											owner = root
											exists = governor
											governor = {
												is_friend = scope:king_maker_unhappy
											}

										}
									}
								}
							}
						}

                    }
                }
                add_loyalty = inspired_disloyalty_other_l

            }
            scope:king_maker_unhappy = {
                add_gold = -500
            }
        }
        set_variable = {
            name = recent_king_maker_plot
            days = 730 #2 years
        }

    }
    option = {
        name = c3rd_events.39.a
        custom_tooltip = c3rd_events.39.a.tt1
    }
}


#Republic reforms and crisis pushing to monarchy
c3rd_events.40 = { #Senate aftermath of the assassination, political unstability or reform to monarchy ?
    type = country_event
    title = "c3rd_events.40.t"
    desc = {
        desc = "c3rd_events.40.desc"
        triggered_desc = {
            trigger = {
                scope:general_leader = {
                    is_alive = yes
                    employer = root
                    is_ruler = no
                }
            }
            desc = "c3rd_events.40.desc.1"

        }
        triggered_desc = {
            trigger = {
                scope:general_leader = {
                    is_alive = yes
                    employer = root
                    is_ruler = yes
                }
            }
            desc = "c3rd_events.40.desc.2"
        }
        triggered_desc = {
            trigger = {
                scope:general_leader = {
                    OR = {
                        is_alive = no
                        NOT = {employer = root}
                    }
                }
            }
            desc = "c3rd_events.40.desc.3"
        }
    }

    picture = senate_debate

    trigger = {
        has_land = yes
        is_tribal = no
        is_ai = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        is_republic = yes
        has_variable = on_going_rep_thingy
        NOR = { #just in case, but should not come here anyway if not
            has_country_modifier = military_anarchy
            has_variable = recent_military_anarchy
        }

    }

    left_portrait = current_ruler
    right_portrait = scope:general_leader

    immediate = {
    }

    option = {#if high senate support and high stability, just imprison the leaders for tyranny gain and senate support
        name = c3rd_events.40.a
        custom_tooltip = c3rd_events.40.a.tt1
        trigger = {
            has_senate_approval >= 0.90
            stability >= 80
            scope:general_leader = {
                is_ruler = no
            }
        }
        highlight = yes
        if = {
            limit = {
                scope:general_leader = {
                    is_alive = yes
                    employer = root
                    is_ruler = no
                }
            }
            imprison = {
                target = scope:general_leader
            }
        }
        add_tyranny = 10
        add_stability = -10

        if = {
            limit = { has_party_type = optimates_party }
            add_party_approval = {
                party_type = boni_party
                value = -50
            }
            add_party_approval = {
                party_type = populares_party
                value = -50
            }
            add_party_approval = {
                party_type = optimates_party
                value = -50
            }

        }
        else = {
            add_party_approval = {
                party_type = traditionalist_party
                value = -50
            }
            add_party_approval = {
                party_type = democratic_party
                value = -50
            }

            add_party_approval = {
                party_type = oligarchic_party
                value = -50
            }
        }
        current_ruler = {
            add_popularity = -20
        }
    }

    option = {#general is the leader : makes things way easier in excahnge of tyranny
        name = c3rd_events.40.b
        custom_tooltip = c3rd_events.40.b.tt1
        highlight = yes
        trigger = {
            current_ruler = scope:general_leader
        }
        scope:general_leader = {
            add_character_modifier = {
                name = king_maker
                duration = 7300
            }
        }
        add_tyranny = 10
        add_country_modifier = {
            name = political_unstability
            duration = -1
        }
        trigger_event = {
            id = c3rd_events.41
            days = 90
        }

    }


    option = {#general is not the leader, offer him to guide us
        name = c3rd_events.40.c
        custom_tooltip = c3rd_events.40.c.tt1
        trigger = {
            scope:general_leader = {
                is_alive = yes
                employer = root
                is_ruler = no
            }
        }
        scope:general_leader = {
            add_character_modifier = {
                name = king_maker
                duration = 7300
            }
            add_corruption = 10
            add_popularity = 10
        }
        set_as_ruler = scope:general_leader
        add_tyranny = 10
        add_country_modifier = {
            name = political_unstability
            duration = -1
        }
        trigger_event = {
            id = c3rd_events.41
            days = 90
        }

    }

    option = {#let's make the reforms
        name = c3rd_events.40.d
        custom_tooltip = c3rd_events.40.d.tt1
        if = {
            limit = { has_senate_approval < 0.40}
            add_tyranny = 5
        }
        add_stability = -5
        add_country_modifier = {
            name = political_unstability
            duration = -1
        }
        trigger_event = {
            id = c3rd_events.41
            days = 90
        }
    }
    option = {#better not touch anything and keep that awful modifier forever
        name = c3rd_events.40.e
        custom_tooltip = c3rd_events.40.e.tt1
        add_stability = 5
        add_country_modifier = {
            name = political_unstability
            duration = -1
        }
        remove_variable = on_going_rep_thingy
    }
    after = {
        add_country_modifier = {
            name = dictatorial_extension_c3rd
            duration = 720
        }

    }
}

#Republic reforms and crisis pushing to monarchy
c3rd_events.41 = { #first of all lets assure the authority
    type = country_event
    title = "c3rd_events.41.t"
    desc = "c3rd_events.41.desc"

    picture = senate_debate

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        is_republic = yes
        has_variable = on_going_rep_thingy

    }

    left_portrait = current_ruler

    option = {#our leader is so popular
        name = c3rd_events.41.a
        custom_tooltip = c3rd_events.41.a.tt1
        trigger = {
            current_ruler = {
                popularity >= 80
            }
        }
        highlight = yes

        add_country_modifier = {
            name = reform_to_monarchy_modifier
            duration = 3650
        }

        trigger_event = {
            id = c3rd_events.42
            days = 90
        }
    }

    option = {#follow me and be rich
        name = c3rd_events.41.b
        custom_tooltip = c3rd_events.41.b.tt1
        add_country_modifier = {
            name = reform_to_monarchy_modifier
            duration = 3650
        }
        add_treasury = {
            value = has_monthly_income
            multiply = -15
        }

        trigger_event = {
            id = c3rd_events.42
            days = 90
        }

    }


    option = {#you will be able to do whatever you want
        name = c3rd_events.41.c
        custom_tooltip = c3rd_events.41.c.tt1
        add_country_modifier = {
            name = reform_to_monarchy_modifier
            duration = 3650
        }
        add_country_modifier = {
            name = general_corruption
            duration = 720 #5years
        }

        trigger_event = {
            id = c3rd_events.42
            days = 90
        }

    }


}

c3rd_events.42 = { #now lets root out corruption
    type = country_event
    title = "c3rd_events.42.t"
    desc = "c3rd_events.42.desc"

    picture = senate_debate

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        is_republic = yes
        has_variable = on_going_rep_thingy

    }

    left_portrait = current_ruler


    option = {#high senate approval
        name = c3rd_events.42.a
        custom_tooltip = c3rd_events.42.a.tt1
        trigger = {
            has_senate_approval >= 0.75
        }
        highlight = yes

        trigger_event = {
            id = c3rd_events.43
            days = 90
        }
    }

    option = {#political move
        name = c3rd_events.42.b
        custom_tooltip = c3rd_events.42.b.tt1

        add_political_influence = -50
        trigger_event = {
            id = c3rd_events.43
            days = 90
        }

    }


    option = {#
        name = c3rd_events.42.c
        custom_tooltip = c3rd_events.42.c.tt1
        add_country_modifier = {
            name = nobility_turmoils
            duration = 1825
        }

        trigger_event = {
            id = c3rd_events.43
            days = 90
        }

    }

}


c3rd_events.43 = { #now lets assure stability
    type = country_event
    title = "c3rd_events.43.t"
    desc = "c3rd_events.43.desc"

    picture = senate_debate

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        is_republic = yes
        has_variable = on_going_rep_thingy

    }

    left_portrait = current_ruler

    immediate = {
        random_country_culture = {
            limit = {
                is_integrated = no
            }
            weight = {
                modifier = {
                    factor = country_culture_pop_count
                }
            }
            save_scope_as = culture_targeted_for_slave
        }
    }
    option = {#high religious unity
        name = c3rd_events.43.a
        custom_tooltip = c3rd_events.43.a.tt1
        trigger = {
            religious_unity >= 90
        }
        highlight = yes

        trigger_event = {
            id = c3rd_events.44
            days = 90
        }
    }

    option = {#scape goat
        name = c3rd_events.43.b
        custom_tooltip = c3rd_events.43.b.tt1

        scope:culture_targeted_for_slave = {
            set_country_culture_right = slaves
        }
        trigger_event = {
            id = c3rd_events.44
            days = 90
        }

    }


    option = {#support of the priests
        name = c3rd_events.43.c
        custom_tooltip = c3rd_events.43.c.tt1
        add_country_modifier = {
            name = priest_unrestricted
            duration = 1825
        }

        trigger_event = {
            id = c3rd_events.44
            days = 90
        }

    }

}
c3rd_events.44 = { #finally, seize power
    type = country_event
    title = "c3rd_events.44.t"
    desc = "c3rd_events.44.desc"

    picture = senate_debate

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        is_republic = yes
        has_variable = on_going_rep_thingy

    }

    left_portrait = current_ruler
    immediate = {
        remove_variable = on_going_rep_thingy
        if = {
            limit = {
                has_country_modifier = political_unstability
            }
            remove_country_modifier = political_unstability
        }
        if = {
            limit = {
                has_country_modifier = too_grand_republic
            }
            remove_country_modifier = too_grand_republic
        }
        if = {
            limit = {
                has_country_modifier = too_huge_republic
            }
            remove_country_modifier = too_huge_republic
        }
        if = {
            limit = {
                has_country_modifier = too_giant_republic
            }
            remove_country_modifier = too_giant_republic
        }
        if = {
            limit = {
                has_country_modifier = provinces_republican_reforms
            }
            remove_country_modifier = provinces_republican_reforms
        }
        remove_country_modifier = dictatorial_extension_c3rd
        add_country_modifier = {
            name = deep_reforms
            duration = 18250 #50years
        }
        hidden_effect = {
            every_owned_province = {
                limit = {
                    has_province_modifier = athenian_mission_03_council_modifier
                }
                remove_province_modifier = athenian_mission_03_council_modifier
            }
        }
    }


    option = {#high senate approval
        name = c3rd_events.44.a
        custom_tooltip = c3rd_events.44.a.tt1

        highlight = yes
        republic_to_monarchy_law_variable_effect = yes # decide which legion law should be transferred
        change_government = dictatorship
        republic_to_monarchy_law_change_effect = yes # change legion law based on variable if present
    }

}


c3rd_events.45 = { #powerful republic leader want to reform
    type = country_event
    title = "c3rd_events.45.t"
    desc = "c3rd_events.45.desc"

    picture = throneroom

    trigger = {
        has_land = yes
        num_of_cities >= 10
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        is_republic = yes
        NOR = {
            has_variable = on_going_rep_thingy
            has_variable = recent_rep_reform
        }
        current_ruler = {
            popularity >= 80
            NOT = {
                has_trait = content
            }
        }
        OR = {
            has_senate_approval >= 0.75
            has_country_modifier = political_unstability
        }
        has_civil_war = no

    }

    left_portrait = current_ruler

    weight_multiplier = {
        modifier = {
            factor = 2
            current_ruler = {
                has_trait = ambitious
            }
        }
        modifier = {
            factor = 1.5
            current_ruler = {
                has_trait = founder
            }
        }
        modifier = {
            factor = 0.7
            current_ruler = {
                has_trait = incapable
            }
        }
        modifier = {
            factor = 1.5
            current_date >= 1000.1.1
        }
        modifier = {
            factor = 1.5
            current_date >= 1100.1.1
        }
        modifier = {
            factor = 1.5
            tyranny >= 25
        }
        modifier = {
            factor = 2
            tyranny >= 50
        }
        modifier = {
            factor = 2
            tyranny >= 75
        }
        modifier = {
            factor = 2
            has_country_modifier = political_unstability
        }
        modifier = {
            factor = 0.1
            towards_civil_war = yes
        }
    }
    immediate = {
        current_ruler = {
            save_scope_as = adored_ruler
        }
        set_variable = {
            name = recent_rep_reform
            days = 3650
        }
    }


    option = {#ok, let's help him
        name = c3rd_events.45.a
        custom_tooltip = c3rd_events.45.a.tt1
		ai_chance = {
			factor = 100
		}

        set_variable = {
            name = on_going_rep_thingy
            days = 600
        }
        add_country_modifier = {
            name = dictatorial_extension_c3rd
            duration = 720
        }
        trigger_event = {
            id = c3rd_events.41
            days = 90
        }

    }

    option = {#no way
        name = c3rd_events.45.b
        custom_tooltip = c3rd_events.45.b.tt1
        if = {
            limit = {
                has_country_modifier = political_unstability
            }
            add_stability = -5
        }
        else = {
            hidden_effect = {
                random_list = {
                    100 = {
                        modifier = {
                            add = 10
                            current_ruler = {
                                has_trait = submissive
                            }
                        }
                        modifier = {
                            add = 10
                            current_ruler = {
                                has_trait = corrupt
                            }
                        }
                        modifier = {
                            add = current_ruler.corruption
                        }
                        modifier = {
                            add = 10
                            current_ruler = {
                                has_trait = unnoticeable
                            }
                        }
                        trigger_event = {
                            id = c3rd_events.47
                            days = 15
                        }

                    }
                    1 = {
                        modifier = {
                            add = current_ruler.popularity
                        }
                        modifier = {
                            add = current_ruler.charisma
                        }
                        modifier = {
                            add = current_ruler.martial
                        }
                        modifier = {
                            add = 10
                            current_ruler = {
                                has_trait = assertive
                            }
                        }
                        modifier = {
                            add = 10
                            current_ruler = {
                                has_trait = assertive
                            }
                        }
                        modifier = {
                            add = 50
                            has_country_modifier = political_unstability
                        }
                        modifier = {
                            add = 10
                            current_ruler = {
                                has_trait = righteous
                            }
                        }
                        modifier = {
                            add = 20
                            current_ruler = {
                                has_trait = prominent
                            }
                        }
                        modifier = {
                            add = 20
                            current_ruler = {
                                has_trait = orator
                            }
                        }
                        modifier = {
                            add = 10
                            current_ruler = {
                                has_trait = victorious
                            }
                        }
                        modifier = {
                            add = 10
                            current_ruler = {
                                has_trait = conqueror
                            }
                        }
                        trigger_event = {
                            id = c3rd_events.46
                            days = 5
                        }
                    }
                }
            }
        }

    }

}

c3rd_events.46 = { #unstability made by ruler
    type = country_event
    title = "c3rd_events.46.t"
    desc = "c3rd_events.46.desc"

    picture = roman_trial

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        is_republic = yes

    }

    left_portrait = current_ruler
    immediate = {
        if = {
            limit = {
                has_country_modifier = political_unstability
            }
            add_stability = -15
        }
        else = {
            add_stability = -5
            add_country_modifier = {
                name = political_unstability
                duration = -1
            }
        }
    }


    option = {
        name = c3rd_events.46.a
        custom_tooltip = c3rd_events.46.a.tt1

    }
}

c3rd_events.47 = { #ruler stopped
    type = country_event
    title = "c3rd_events.47.t"
    desc = "c3rd_events.47.desc"

    picture = roman_trial

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        is_republic = yes

    }

    left_portrait = current_ruler

    immediate = {
        current_ruler = {
            add_popularity = -50
        }
    }


    option = {
        name = c3rd_events.47.a
        custom_tooltip = c3rd_events.47.a.tt1

    }
}




c3rd_events.48 = { #huge republican empire , too huge for a functionnal republic
    type = country_event
    title = "c3rd_events.48.t"
    desc = "c3rd_events.48.desc"

    picture = road_construction

    trigger = {
        has_land = yes
        num_of_cities >= 1000
        is_tribal = no
        current_date >= 900.1.1
        is_republic = yes
        NOR = {
            has_variable = on_going_rep_thingy
            has_variable = recent_rep_huge
            has_country_modifier = political_unstability
            has_country_modifier = provinces_republican_reforms
        }
        has_civil_war = no

    }

    left_portrait = current_ruler

    weight_multiplier = {
        modifier = {
            factor = 0.5
            has_variable = pretty_recent_rep_huge
        }
        modifier = {
            factor = 1.2
            current_ruler = {
                finesse <= 5
            }
        }
        modifier = {
            factor = 1.3
            current_ruler = {
                finesse <= 1
            }
        }
        modifier = {
            factor = 1.3
            current_ruler = {
                has_trait = incapable
            }
        }
        modifier = {
            factor = 1.2
            current_ruler = {
                has_trait = lazy
            }
        }
        modifier = {
            factor = 0.7
            current_ruler = {
                has_trait = founder
            }
        }
        modifier = {
            factor = 0.8
            current_ruler = {
                has_trait = energetic
            }
        }
        modifier = {
            factor = 1.2
            current_date >= 1000.1.1
        }
        modifier = {
            factor = 1.5
            current_date >= 1100.1.1
        }
        modifier = {
            factor = 0.1
            towards_civil_war = yes
        }
        modifier = {
            factor = 1.2
            num_of_cities >= 1500
        }
        modifier = {
            factor = 1.3
            num_of_cities >= 2000
        }
        modifier = {
            factor = 1.4
            num_of_cities >= 2500
        }
        modifier = {
            factor = 0.8
            has_country_modifier = too_grand_republic
        }
        modifier = {
            factor = 0.65
            has_country_modifier = too_huge_republic
        }
        modifier = {
            factor = 0.5
            has_country_modifier = too_giant_republic
        }
    }
    immediate = {
        current_ruler = {
            save_scope_as = adored_ruler
        }
        set_variable = {
            name = recent_rep_huge
            days = 3650
        }
    }


    option = {#ok, let's throw money
        name = c3rd_events.48.a
        custom_tooltip = c3rd_events.48.a.tt1

        add_treasury = {
            value = num_of_cities
            multiply = -11
        }
        set_variable = {
            name = pretty_recent_rep_huge
            days = 7300 #10 more years after the 10 years with half the chances
        }

    }
    option = {#ok, let's make some reforms
        name = c3rd_events.48.b
        custom_tooltip = c3rd_events.48.b.tt1
        add_political_influence = -50
        hidden_effect = {
            random_list = {
                10 = {
                    modifier = {
                        add = 10
                        current_ruler = {
                            has_trait = submissive
                        }
                    }
                    modifier = {
                        add = 10
                        current_ruler = {
                            has_trait = corrupt
                        }
                    }
                    modifier = {
                        add = current_ruler.corruption
                    }
                    modifier = {
                        add = 10
                        current_ruler = {
                            has_trait = unnoticeable
                        }
                    }
                    modifier = {
                        add = 10
                        current_date >= 1000.1.1
                    }
                    modifier = {
                        add = 10
                        current_date >= 1100.1.1
                    }
                    modifier = {
                        add = 20
                        current_date >= 1200.1.1
                    }
                    trigger_event = { #failure, political instability
                        id = c3rd_events.50
                        days = 15
                    }

                }
                1 = {
                    modifier = {
                        add = current_ruler.popularity
                    }
                    modifier = {
                        add = current_ruler.charisma
                    }
                    modifier = {
                        add = 10
                        current_ruler = {
                            has_trait = assertive
                        }
                    }
                    modifier = {
                        add = 10
                        current_ruler = {
                            has_trait = righteous
                        }
                    }
                    modifier = {
                        add = 20
                        current_ruler = {
                            has_trait = prominent
                        }
                    }
                    modifier = {
                        add = 20
                        current_ruler = {
                            has_trait = orator
                        }
                    }
                    trigger_event = { #reform the republic, get a modifier to keep things ok for 20 years
                        id = c3rd_events.49
                        days = 15
                    }
                }
            }
        }

    }

    option = {#let's not do anything
        name = c3rd_events.48.c
        custom_tooltip = c3rd_events.48.c.tt1
        if = {
            limit = {
                has_country_modifier = too_giant_republic
            }
            add_stability = -10
        }
        else_if = {
            limit = {
                has_country_modifier = too_huge_republic
            }
            remove_country_modifier = too_huge_republic
            add_country_modifier = {
                name = too_giant_republic
                duration = -1
            }
        }
        else_if = {
            limit = {
                has_country_modifier = too_grand_republic
            }
            remove_country_modifier = too_grand_republic
            add_country_modifier = {
                name = too_huge_republic
                duration = -1
            }
        }
        else = {
            add_country_modifier = {
                name = too_grand_republic
                duration = -1
            }
        }

    }

}


c3rd_events.49 = { #republic reformed
    type = country_event
    title = "c3rd_events.49.t"
    desc = "c3rd_events.49.desc"

    picture = senate_debate

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        is_republic = yes

    }

    left_portrait = current_ruler

    immediate = {
        current_ruler = {
            add_popularity = 30
        }
        add_country_modifier = {
            name = provinces_republican_reforms
            duration = 7300 #20years
        }
        set_variable = {
            name = pretty_recent_rep_huge
            days = 10000 #30 years so 10 years after the first modifier
        }
        if = {
            limit = {
                has_country_modifier = too_giant_republic
            }
            remove_country_modifier = too_giant_republic
        }
        if = {
            limit = {
                has_country_modifier = too_huge_republic
            }
            remove_country_modifier = too_huge_republic
        }
        if = {
            limit = {
                has_country_modifier = too_grand_republic
            }
            remove_country_modifier = too_grand_republic
        }
    }


    option = {
        name = c3rd_events.49.a
        custom_tooltip = c3rd_events.49.a.tt1

    }
}


c3rd_events.50 = { #reforms failed
    type = country_event
    title = "c3rd_events.50.t"
    desc = "c3rd_events.50.desc"

    picture = roman_trial

    trigger = {
        has_land = yes
        is_tribal = no
        current_date >= 900.1.1
        has_country_modifier = crisis_of_the_third_century
        is_republic = yes

    }

    left_portrait = current_ruler

    immediate = {
        current_ruler = {
            add_popularity = -20
        }
        add_country_modifier = {
            name = political_unstability
            duration = -1
        }
        if = {
            limit = {
                has_country_modifier = too_giant_republic
            }
            remove_country_modifier = too_giant_republic
        }
        if = {
            limit = {
                has_country_modifier = too_huge_republic
            }
            remove_country_modifier = too_huge_republic
        }
        if = {
            limit = {
                has_country_modifier = too_grand_republic
            }
            remove_country_modifier = too_grand_republic
        }
    }


    option = {
        name = c3rd_events.50.a
        custom_tooltip = c3rd_events.50.a.tt1

    }
}



c3rd_events.51 = { #no more overextension if too small or not republic
    type = country_event
    title = "c3rd_events.51.t"
    desc = "c3rd_events.51.desc"

    picture = road_construction

    trigger = {
        has_land = yes
        OR = {
            has_country_modifier = too_grand_republic
            has_country_modifier = too_huge_republic
            has_country_modifier = too_giant_republic
        }
        OR = {
            num_of_cities <= 900
            is_republic = no
        }
    }

    left_portrait = current_ruler

    immediate = {
        if = {
            limit = {
                has_country_modifier = too_giant_republic
            }
            remove_country_modifier = too_giant_republic
        }
        if = {
            limit = {
                has_country_modifier = too_huge_republic
            }
            remove_country_modifier = too_huge_republic
        }
        if = {
            limit = {
                has_country_modifier = too_grand_republic
            }
            remove_country_modifier = too_grand_republic
        }
    }


    option = {
        name = c3rd_events.51.a
        custom_tooltip = c3rd_events.51.a.tt1

    }
}

c3rd_events.52 = { #no more overextension if political instability against a cost
    type = country_event
    title = "c3rd_events.52.t"
    desc = "c3rd_events.52.desc"

    picture = road_construction

    trigger = {
        has_land = yes
        OR = {
            has_country_modifier = too_grand_republic
            has_country_modifier = too_huge_republic
            has_country_modifier = too_giant_republic
        }
    }

    left_portrait = current_ruler

    immediate = {
        if = {
            limit = {
                has_country_modifier = too_giant_republic
            }
            remove_country_modifier = too_giant_republic
        }
        if = {
            limit = {
                has_country_modifier = too_huge_republic
            }
            remove_country_modifier = too_huge_republic
        }
        if = {
            limit = {
                has_country_modifier = too_grand_republic
            }
            remove_country_modifier = too_grand_republic
        }
    }


    option = {
        name = c3rd_events.51.a
        custom_tooltip = c3rd_events.51.a.tt1

    }
}

c3rd_events.100 = { #debug event
    type = country_event
    title = "c3rd_events.100.t"
    desc = "c3rd_events.100.desc"

    picture = road_construction


    left_portrait = current_ruler
	trigger = {
		OR = {
			any_governorships = {
				has_variable = governorship_owner
				var:governorship_owner = {
					is_alive = yes
					employer = root
				}
			}
			any_subject = {
				is_subject_type = autonomous_domain
				has_variable = owner_from_another_empire
			}
			any_character = {
				has_variable = country_ownership
			}

		}
	}
	immediate = {
        random_character = {
            limit = {
                save_temporary_scope_as = tmp_char
                employer = {
                    any_governorships = {
                        has_variable = governorship_owner
                        var:governorship_owner = scope:tmp_char
                        NOT = {
                            is_in_list = family_domain_govs
                        }
                        governor = {
                            is_ruler = no
                        }
                    }
                }
            }
            save_scope_as = asked_landowner
        }
		while = {
            count = country_gov_ratio_number
            random_governorships = {
                limit = {
                    has_variable = governorship_owner
                    var:governorship_owner = scope:asked_landowner
                    NOT = {
                        is_in_list = family_domain_govs
                    }
                    governor = {
                        is_ruler = no
                    }
                }
                weight = {
                    modifier = {
                        factor = 10
                        any_governorship_state = {
                            any_state_province = {
                                any_neighbor_province = {
                                    governorship = {
                                        is_in_list = family_domain_govs
                                    }
                                }
                            }
                        }
                    }
                    modifier = {
                        factor = 10
                        any_governorship_state = {
                            any_state_province = {
                                any_neighbor_province = {
                                    owner = {
                                        has_variable = owner_from_another_empire
                                        var:owner_from_another_empire = scope:asked_landowner
                                    }
                                }
                            }
                        }
                    }
                    modifier = {
                        factor = 3
                        any_governorship_state = {
                            any_state_province = {
                                any_neighbor_province = {
                                    NOT = {
                                        owner = root
                                    }
                                }
                            }
                        }
                    }
                    modifier = {
                        factor = 0.1
                        any_governorship_state = {
                            any_state_province = {
                                any_neighbor_province = {
                                    governor = {
                                        is_ruler = yes
                                    }
                                }
                            }
                        }
                    }
                }
                add_to_list = family_domain_govs
            }
        }
	}


    option = {
        name = c3rd_events.100.a
        
        
        every_governorships = {
            limit = {
                is_in_list = family_domain_govs
            }
            save_scope_as = gov_tooltip
            custom_tooltip = c3rd_other_events.86.a.tt2
        }
    }
}



