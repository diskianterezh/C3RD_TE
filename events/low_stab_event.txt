namespace = low_stab_event
low_stab_event.1 = {
	#oh noes, bad stability
	type = country_event
	title = "low_stab_event.1.t"
	desc = "low_stab_event.1.desc"
	picture = council_country
	trigger = {
		has_land = yes
		OR = {
			stability < 10
			AND = {
				stability < 15
				is_ai = no
			}
		}
		is_tribal = no
		NOT = {
			has_country_modifier = internal_collapse
		}
		rank = great_power
		current_date >= 900.1.1
	}
	immediate = {
		add_country_modifier = {
			name = internal_collapse
			duration = -1
		}
		if = {
			limit = {
				#players are usually better than AI
				is_ai = no
			}
			add_stability = -5
		}
		ordered_country_culture = {
			#for democrats
			limit = {
				is_integrated = no
				NOT = {
					this.culture = root.culture
				}
				country_culture_pop_count > 80
				save_temporary_scope_as = culture_to_integrate
				root = {
					any_owned_province = {
						dominant_province_culture = scope:culture_to_integrate.culture
					}
				}
			}
			order_by = country_culture_pop_count
			save_scope_as = agenda_culture
		}
		ordered_country_culture = {
			#for traditionalists
			limit = {
				is_integrated = yes
				NOT = {
					this.culture = root.culture
				}
			}
			order_by = country_culture_pop_count
			save_scope_as = unagenda_culture
		}
	}
	option = {
		#do nothing - get the modifier
		name = low_stab_event.1.a
		custom_tooltip = low_stab_event.1.a.tt1
	}
	option = {
		name = low_stab_event.1.b
		custom_tooltip = low_stab_event.1.b.tt1
		trigger = {
			is_monarchy = yes
			legitimacy > 50
			current_ruler = {
				popularity > 50
			}
		}
		ai_chance = {
			modifier = {
				factor = 10
			}
		}
		highlight = no
		remove_country_modifier = internal_collapse
		add_legitimacy = -75
		current_ruler = {
			add_popularity = -50
		}
		add_tyranny = 10
		add_stability = 10
	}
	option = {
		name = low_stab_event.1.c
		custom_tooltip = low_stab_event.1.c.tt1
		trigger = {
			is_republic = yes
			has_senate_approval > 0.85
		}
		ai_chance = {
			modifier = {
				factor = 10
			}
		}
		highlight = yes
		remove_country_modifier = internal_collapse
		if = {
			limit = {
				has_party_type = optimates_party
			}
			add_party_approval = {
				party_type = boni_party
				value = -50
			}
			add_party_approval = {
				party_type = populares_party
				value = -50
			}
			add_party_approval = {
				party_type = optimates_party
				value = -50
			}
		}
		else = {
			add_party_approval = {
				party_type = traditionalist_party
				value = -50
			}
			add_party_approval = {
				party_type = democratic_party
				value = -50
			}
			add_party_approval = {
				party_type = oligarchic_party
				value = -50
			}
		}
		current_ruler = {
			add_popularity = -50
		}
		add_stability = 10
	}
	option = {
		name = low_stab_event.1.d
		custom_tooltip = low_stab_event.1.d.tt1
		trigger = {
			is_republic = yes
			has_senate_approval > 0.5
			current_ruler = {
				OR = {
					party_type = oligarchic_party
					party_type = optimates_party
				}
			}
			NOT = {
				has_country_modifier = general_corruption
			}
		}
		ai_chance = {
			modifier = {
				factor = 10
			}
		}
		remove_country_modifier = internal_collapse
		add_tyranny = 25
		add_country_modifier = {
			name = general_corruption
			duration = 3650
		}
		current_ruler = {
			add_popularity = -50
		}
		if = {
			limit = {
				has_party_type = optimates_party
			}
			add_party_approval = {
				party_type = boni_party
				value = -50
			}
			add_party_approval = {
				party_type = populares_party
				value = -50
			}
		}
		else = {
			add_party_approval = {
				party_type = traditionalist_party
				value = -50
			}
			add_party_approval = {
				party_type = democratic_party
				value = -50
			}
		}
		add_stability = 10
	}
	option = {
		name = low_stab_event.1.e
		custom_tooltip = low_stab_event.1.e.tt1
		trigger = {
			is_republic = yes
			has_senate_approval > 0.5
			current_ruler = {
				OR = {
					party_type = populares_party
					party_type = democratic_party
				}
			}
			NOT = {
				has_country_modifier = nobility_turmoils
			}
			any_country_culture = {
				is_integrated = no
				NOT = {
					this.culture = root.culture
				}
				save_temporary_scope_as = culture_to_integrate
				country_culture_pop_count > 80
				root = {
					any_owned_province = {
						dominant_province_culture = scope:culture_to_integrate.culture
					}
				}
			}
		}
		ai_chance = {
			modifier = {
				factor = 10
			}
		}
		remove_country_modifier = internal_collapse
		scope:agenda_culture = {
			set_country_culture_right = citizen
		}
		add_country_modifier = {
			name = nobility_turmoils
			duration = 3650
		}
		current_ruler = {
			add_popularity = -50
		}
		if = {
			limit = {
				has_party_type = optimates_party
			}
			add_party_approval = {
				party_type = optimates_party
				value = -50
			}
			add_party_approval = {
				party_type = boni_party
				value = -50
			}
		}
		else = {
			add_party_approval = {
				party_type = oligarchic_party
				value = -50
			}
			add_party_approval = {
				party_type = traditionalist_party
				value = -50
			}
		}
		add_stability = 10
	}
	option = {
		name = low_stab_event.1.f
		custom_tooltip = low_stab_event.1.f.tt1
		trigger = {
			is_republic = yes
			has_senate_approval > 0.5
			current_ruler = {
				OR = {
					party_type = traditionalist_party
					party_type = boni_party
				}
			}
			NOT = {
				has_country_modifier = priest_unrestricted
			}
			any_country_culture = {
				is_integrated = yes
				NOT = {
					this.culture = root.culture
				}
			}
		}
		ai_chance = {
			modifier = {
				factor = 10
			}
		}
		remove_country_modifier = internal_collapse
		scope:unagenda_culture = {
			set_country_culture_right = freemen
		}
		add_country_modifier = {
			name = priest_unrestricted
			duration = 3650
		}
		current_ruler = {
			add_popularity = -50
		}
		if = {
			limit = {
				has_party_type = optimates_party
			}
			add_party_approval = {
				party_type = optimates_party
				value = -50
			}
			add_party_approval = {
				party_type = populares_party
				value = -50
			}
		}
		else = {
			add_party_approval = {
				party_type = oligarchic_party
				value = -50
			}
			add_party_approval = {
				party_type = democratic_party
				value = -50
			}
		}
		add_stability = 10
	}
}

low_stab_event.2 = {
	#yay, better stability
	type = country_event
	title = "low_stab_event.2.t"
	desc = "low_stab_event.2.desc"
	picture = council_country
	trigger = {
		has_land = yes
		has_country_modifier = internal_collapse
		OR = {
			stability > 25
			NOT = {
				OR = {
					rank = great_power
					rank = major_power
				}
			}
		}
	}
	immediate = {
		remove_country_modifier = internal_collapse
	}
	option = {
		name = low_stab_event.2.a
		custom_tooltip = low_stab_event.2.a.tt1
	}
}

low_stab_event.3 = {
	#governors declaring total independance
	type = country_event
	title = "low_stab_event.3.t"
	desc = "low_stab_event.3.desc"
	goto_location = scope:byebye.capital_scope
	picture = council_country
	trigger = {
		has_land = yes
		has_country_modifier = internal_collapse
		OR = {
			stability < 5
			has_civil_war = yes
		}
		any_governorships = {
			exists = governor
			governor = {
				is_disloyal = yes
				is_head_of_family = no
				NOT = {
					has_character_modifier = major_influence_aristocrat
				}
			}
			NOT = {
				has_variable = governorship_owner
			}
		}
	}
	weight_multiplier = {
		modifier = {
			add = 45
			OR = {
				has_civil_war = yes
				stability < 5
			}
		}
	}
	immediate = {
		random_governorships = {
			limit = {
				exists = governor
				governor = {
					is_disloyal = yes
					is_head_of_family = no
					NOT = {
						has_character_modifier = major_influence_aristocrat
					}
				}
				NOT = {
					has_variable = governorship_owner
				}
			}
			governor = {
				save_scope_as = byebye_governor
			}
			hidden_effect = {
				random_governorship_state = {
					random_state_province = {
						limit = {
							owner = root
						}
						create_country = {
							save_scope_as = byebye
							change_government = despotic_monarchy
							change_law = work_for_the_best
						}
					}
				}
				every_governorship_state = {
					every_state_province = {
						limit = {
							owner = root
						}
						set_owned_by = scope:byebye
					}
				}
			}
		}
		scope:byebye_governor = {
			remove_all_positions = yes
			move_country = scope:byebye
			set_home_country = scope:byebye
			every_child = {
				limit = {
					prisoner = no
				}
				remove_all_positions = yes
				move_country = scope:byebye
				set_home_country = scope:byebye
			}
		}
        scope:byebye = {
            set_as_ruler = scope:byebye_governor
        }
	}
	option = {
		name = low_stab_event.3.a
		custom_tooltip = low_stab_event.3.a.tt1
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_stability = 2
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_stability = 1
		}
		add_truce = {
			target = scope:byebye
			duration = 3650
		}
	}
	option = {
		trigger = {
			has_civil_war = no
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				has_aggressive_expansion < 10
			}
			modifier = {
				factor = 0.5
				has_aggressive_expansion >= 30
			}
			modifier = {
				factor = 0.5
				war = yes
			}
		}
		name = low_stab_event.3.b
		custom_tooltip = low_stab_event.3.b.tt1
		declare_war_with_wargoal = {
			war_goal = conquer_wargoal
			province = scope:byebye.capital_scope
			target = scope:byebye
		}
	}
}

low_stab_event.4 = {
	#governor proposes to be independent
	type = country_event
	title = "low_stab_event.4.t"
	desc = "low_stab_event.4.desc"
	goto_location = scope:independent_governorship_province
	picture = council_country
	trigger = {
		has_land = yes
		has_country_modifier = internal_collapse
		NOT = {
			stability >= 25
		}
		any_governorships = {
			any_governorship_state = {
				any_state_province = {
					NOT = {
						dominant_province_culture = root.culture
					}
					owner = ROOT
				}
			}
			exists = governor
			NOT = {has_variable = recently_gavaway}
			governor = {
				is_head_of_family = no
				NOT = {has_character_modifier = major_influence_aristocrat}
			}
		}
	}
	weight_multiplier = {
		modifier = {
			factor = 1.5
			num_of_cities >= 1000
		}
		modifier = {
			factor = 1.5
			num_of_cities >= 2000
		}
		modifier = {
			factor = 1.5
			num_of_cities >= 3000
		}
	}
	immediate = {
		random_governorships = {
			limit = {
				any_governorship_state = {
					any_state_province = {
						NOT = {
							dominant_province_culture = root.culture
						}
						owner = ROOT
					}
				}
				exists = governor
				NOT = {has_variable = recently_gavaway}
				governor = {
					is_head_of_family = no
					NOT = {has_character_modifier = major_influence_aristocrat}
				}
			}
			check_range_bounds = no
			weight = {
				base = 1
				modifier = {
					add = {
						value = 0
						every_governorship_state = {
							every_state_province = {
								limit = {
									NOT = {
										dominant_province_culture = root.culture
									}
								}
								add = 1
							}
						}
					}
				}
				modifier = {
					factor = 0.1
					has_variable = governorship_owner
				}
			}
			save_scope_as = independent_governorship
			random_governorship_state = {
				random_state_province = {
					save_scope_as = independent_governorship_province
				}
			}
			governor = {
				save_scope_as = independent_current_governor
			}
		}
	}
	option = {
		name = low_stab_event.4.a
		custom_tooltip = low_stab_event.4.a.tt1
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				stability < 5
			}
			modifier = {
				factor = 2
				stability < 15
			}
		}
		if = {
			limit = {
				has_country_modifier = solidus_introduced
				scope:independent_governorship = {
					has_variable = governorship_owner
					var:governorship_owner = {
						is_ruler = no
						NOT = {this = scope:independent_governorship.governor}
					}
				}
			}
			add_tyranny = 2
			var:governorship_owner = {
				add_loyalty = governorship_lost_collapse
			}

		}
		hidden_effect = {
			scope:independent_governorship_province = {
				create_country = {
					save_scope_as = client
					change_government = despotic_monarchy
					change_law = work_for_the_best
				}
			}
			scope:independent_governorship = {
				every_governorship_state = {
					every_state_province = {
						limit = {
							owner = root
						}
						set_owned_by = scope:client
					}
				}
			}
			scope:independent_current_governor = {
				remove_all_positions = yes
				move_country = scope:client
				set_home_country = scope:client
				every_child = {
					limit = {
						prisoner = no
					}
					remove_all_positions = yes
					move_country = scope:client
					set_home_country = scope:client
				}
			}
            
			make_subject = {
				target = scope:client
				type = client_state
			}
			scope:client = {
				add_country_modifier = {
					name = autonomy_granted
					duration = 3650
				}
                set_as_ruler = scope:independent_current_governor
                set_variable = {
                    name = recent_client
                    days = 365
                }
			}
		}
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_stability = 5
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_stability = 4
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_stability = 3
		}
		else = {
			add_stability = 2
		}
	}
	option = {
		name = low_stab_event.4.b
		custom_tooltip = low_stab_event.4.b.tt1
		trigger = {
			scope:independent_current_governor = {
				loyalty >= 20
			}
		}
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_political_influence = -5
			if = {
				limit = {
					is_monarchy = yes
				}
				add_legitimacy = -2
			}
			else_if = {
				limit = {
					is_republic = yes
				}
				add_party_approval = {
					party = scope:independent_current_governor.character_party
					value = -5
				}
			}
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_political_influence = -10
			add_tyranny = 2
			if = {
				limit = {
					is_monarchy = yes
				}
				add_legitimacy = -5
			}
			else_if = {
				limit = {
					is_republic = yes
				}
				add_party_approval = {
					party = scope:independent_current_governor.character_party
					value = -7
				}
			}
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_political_influence = -15
			add_tyranny = 5
			if = {
				limit = {
					is_monarchy = yes
				}
				add_legitimacy = -8
			}
			else_if = {
				limit = {
					is_republic = yes
				}
				add_party_approval = {
					party = scope:independent_current_governor.character_party
					value = -10
				}
			}
		}
		else = {
			add_political_influence = -20
			add_tyranny = 7
			if = {
				limit = {
					is_monarchy = yes
				}
				add_legitimacy = -10
			}
			else_if = {
				limit = {
					is_republic = yes
				}
				add_party_approval = {
					party = scope:independent_current_governor.character_party
					value = -15
				}
			}
		}
		scope:independent_current_governor = {
			add_loyalty = independence_denied
		}
	}
	option = {
		name = low_stab_event.4.c
		custom_tooltip = low_stab_event.4.c.tt1
		trigger = {
			scope:independent_current_governor = {
				loyalty < 20
			}
		}
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_political_influence = -5
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_political_influence = -10
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_political_influence = -15
		}
		else = {
			add_political_influence = -20
		}
		scope:independent_current_governor = {
			add_loyalty = independence_denied
		}
		add_stability = -3
	}
}

low_stab_event.5 = {
	#because civ wars are buggued, lets decrease stab
	type = country_event
	hidden = yes
	trigger = {
		current_date >= 800.1.1
		has_civil_war = yes
		NOT = {
			has_country_modifier = civil_war_stab
		}
	}
	immediate = {
		add_stability = -10
		add_country_modifier = {
			name = civil_war_stab
			duration = -1
		}
	}
}

low_stab_event.6 = {
	#remove if civ war ended
	type = country_event
	hidden = yes
	trigger = {
		has_civil_war = no
		has_country_modifier = civil_war_stab
	}
	immediate = {
		remove_country_modifier = civil_war_stab
	}
}

low_stab_event.7 = {
	#influent aristocrat retreating in his domain
	type = country_event
	title = "low_stab_event.7.t"
	desc = "low_stab_event.7.desc"
	goto_location = scope:byebye.capital_scope
	picture = council_country
	trigger = {
		has_land = yes
		has_country_modifier = internal_collapse
		NOT = {
			stability >= 25
		}
		any_subject = {
			is_subject_type = autonomous_domain
			has_variable = owner_from_another_empire
			NOT = {
				has_variable = recent_domain
			}
			var:owner_from_another_empire = {
				is_ruler = no
				is_alive = yes
				employer = root
				save_temporary_scope_as = tmp_owner
				owned_governorship_num_of_cities < owned_domain_num_of_cities
			}
		}
	}
	weight_multiplier = {
		modifier = {
			factor = 2
			OR = {
				has_civil_war = yes
				stability < 5
			}
		}
	}
	immediate = {
		random_subject = {
			limit = {
				is_subject_type = autonomous_domain
				has_variable = owner_from_another_empire
				var:owner_from_another_empire = {
					is_ruler = no
					is_alive = yes
					employer = root
					save_temporary_scope_as = tmp_owner
					owned_governorship_num_of_cities < owned_domain_num_of_cities
				}
			}
			var:owner_from_another_empire = {
				save_scope_as = byebye_owner
			}
			save_scope_as = byebye_domain
		}
        custom_tooltip = low_stab_event.7.tt1
		hidden_effect = {
			release_subject = scope:byebye_domain
			make_subject = {
				target = scope:byebye_domain
				type = client_state
			}
			scope:byebye_owner = {
				remove_all_positions = yes
				move_country = scope:byebye_domain
				set_home_country = scope:byebye_domain
				every_child = {
					limit = {
						prisoner = no
					}
					remove_all_positions = yes
					move_country = scope:byebye_domain
					set_home_country = scope:byebye_domain
				}
			}
			scope:byebye_domain = {
				set_as_ruler = scope:byebye_owner
                set_variable = {
                    name = recent_client
                    days = 365
                }
				remove_variable = owner_from_another_empire
			}
			if = {
				#edges
				limit = {
					any_governorships = {
						OR = {
							NOT = {
								exists = governor
							}
							governor = {
								is_ruler = no
							}
						}
						has_variable = governorship_owner
						var:governorship_owner = scope:byebye_owner
						any_governorship_state = {
							any_state_province = {
								any_neighbor_province = {
									owner = scope:byebye_domain
								}
							}
						}
					}
				}
				every_governorships = {
					limit = {
						OR = {
							NOT = {
								exists = governor
							}
							governor = {
								is_ruler = no
							}
						}
						has_variable = governorship_owner
						var:governorship_owner = scope:byebye_owner
						any_governorship_state = {
							any_state_province = {
								any_neighbor_province = {
									owner = scope:byebye_domain
								}
							}
						}
					}
					every_governorship_state = {
						limit = {
							any_state_province = {
								any_neighbor_province = {
									owner = scope:byebye_domain
								}
							}
						}
						add_to_list = state_join_domain
					}
				}
				every_country_state = {
					limit = {
						is_in_list = state_join_domain
					}
					remove_from_list = state_join_domain
					every_state_province = {
						set_owned_by = scope:byebye_domain
					}
				}
			}
		}
	}
	option = {
		name = low_stab_event.7.a
		custom_tooltip = low_stab_event.7.a.tt1
		add_stability = 4
		add_truce = {
			target = scope:byebye_domain
			duration = 3650
		}
	}
	option = {
		trigger = {
			has_civil_war = no
			any_governorships = {
				has_variable = governorship_owner
				var:governorship_owner = scope:byebye_owner
			}
		}
		name = low_stab_event.7.b
		custom_tooltip = low_stab_event.7.b.tt1
		add_tyranny = 5
		hidden_effect = {
			every_governorships = {
				limit = {
					has_variable = governorship_owner
					var:governorship_owner = scope:byebye_owner
				}
				remove_variable = governorship_owner
				if = {
					limit = {
						has_variable = governorship_owner_ratio
					}
					remove_variable = governorship_owner_ratio
				}
			}
		}
	}
}


low_stab_event.8 = {
	#influent aristocrat gets domain if decentralized
	type = country_event
	title = "low_stab_event.8.t"
	desc = "low_stab_event.8.desc"
	picture = council_country
	has_civil_war = no
	trigger = {
		has_land = yes
		has_country_modifier = internal_collapse
		NOT = {
			stability >= 25
		}
		has_law = decentralized_administration_law
		any_character = {
			is_ruler = no
			has_variable = country_ownership
			save_temporary_scope_as = temp_potential_domain_owner
			employer = {
				any_governorships = {
					count > 0 #country_gov_ratio_number
					has_variable = governorship_owner
					var:governorship_owner = scope:temp_potential_domain_owner
				}
			}
		}
	}
	weight_multiplier = {
		modifier = {
			factor = 2
			OR = {
				towards_civil_war = yes
				stability < 5
			}
		}
	}
	immediate = {
		random_character = {
			limit = {
				has_variable = country_ownership
				save_temporary_scope_as = temp_potential_domain_owner2
				employer = {
					any_governorships = {
						count > 0 #country_gov_ratio_number
						has_variable = governorship_owner
						var:governorship_owner = scope:temp_potential_domain_owner2
					}
				}
			}
			save_scope_as = asked_landowner #need this name for the scripts
		}
		while = { #here i'm copying the same as in event 86
			count = landowner_asked_ratio_number
			random_governorships = {
				limit = {
					has_variable = governorship_owner
					var:governorship_owner = scope:asked_landowner
					NOT = {
						is_in_list = family_domain_govs
					}
					OR = {
						NOT = {
							exists = governor
						}
						governor = {
							is_ruler = no
						}
					}
				}
				weight = {
					modifier = {
						factor = 10
						any_governorship_state = {
							any_state_province = {
								any_neighbor_province = {
									governorship = {
										is_in_list = family_domain_govs
									}
								}
							}
						}
					}
					modifier = {
						factor = 10
						any_governorship_state = {
							any_state_province = {
								any_neighbor_province = {
									owner = {
										has_variable = owner_from_another_empire
										var:owner_from_another_empire = scope:asked_landowner
									}
								}
							}
						}
					}
					modifier = {
						factor = 3
						any_governorship_state = {
							any_state_province = {
								any_neighbor_province = {
									NOT = {
										owner = root
									}
								}
							}
						}
					}
					modifier = {
						factor = 0.1
						any_governorship_state = {
							any_state_province = {
								any_neighbor_province = {
									governor = {
										is_ruler = yes
									}
								}
							}
						}
					}
				}
				add_to_list = family_domain_govs
			}
		}
		
	}
	option = {
		name = low_stab_event.8.a
		custom_tooltip = low_stab_event.8.a.tt1
		custom_tooltip = c3rd_other_events.86.tt13 #same loc, same variables
		every_governorships = {
			limit = {
				is_in_list = family_domain_govs
			}
			save_scope_as = gov_tooltip
			custom_tooltip = c3rd_other_events.86.a.tt2
		}
		hidden_effect = {
			create_domain = yes
			every_character = {
				limit = {
					has_variable = country_ownership
				}
				recalculate_ownership_char = yes
			}
		}
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_stability = 5
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_stability = 4
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_stability = 3
		}
		else = {
			add_stability = 2
		}
	}
	option = {
		name = low_stab_event.8.b
		custom_tooltip = low_stab_event.8.b.tt1
		trigger = {
			scope:asked_landowner = {
				loyalty >= 20
			}
		}
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_political_influence = -10
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_political_influence = -20
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_political_influence = -30
		}
		else = {
			add_political_influence = -40
		}
		add_stability = -3
		scope:asked_landowner = {
			add_loyalty = independence_denied
		}
	}
	option = {
		name = low_stab_event.8.c
		custom_tooltip = low_stab_event.8.c.tt1
		trigger = {
			scope:independent_current_governor = {
				loyalty < 20
			}
		}
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_political_influence = -10
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_political_influence = -20
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_political_influence = -30
		}
		else = {
			add_political_influence = -40
		}
		scope:independent_current_governor = {
			add_loyalty = independence_denied
		}
		add_stability = -6
	}

	after = {
        every_governorships = {
            limit = {
                is_in_list = family_domain_govs
            }
            remove_from_list = family_domain_govs
        }
	}
}


low_stab_event.9 = {
	#Ducatus grab lands
	type = country_event
	title = "low_stab_event.9.t"
	desc = "low_stab_event.9.desc"
	goto_location = scope:duchy_subject_grabber.capital_scope
	right_portrait = scope:duchy_subject_grabber.current_ruler
	picture = army_desert
	trigger = {
		has_land = yes
		has_country_modifier = internal_collapse
		NOT = {
			stability >= 25
		}
		any_subject = {
			is_subject_type = duchy_subject
			NOT = {
				has_variable = recent_duchy_grab
			}
			save_temporary_scope_as = duchy_check
			any_owned_province = {
				any_neighbor_province = {
					owner = root
					any_neighbor_province = {
						NOR = {
							owner = root
							owner = scope:duchy_check
							owner = {
								is_subject_of = root
							}
						}
						owner = {
							has_land = yes
						}
					}
				}
			}
		}
	}
	weight_multiplier = {
		modifier = {
			factor = 1.5
			num_of_cities >= 1000
		}
		modifier = {
			factor = 1.5
			num_of_cities >= 2000
		}
		modifier = {
			factor = 1.5
			num_of_cities >= 3000
		}
		modifier = {
			factor = 3
			has_law = decentralized_administration_law
		}
	}
	immediate = {
		random_subject = {
			limit = {
				is_subject_type = duchy_subject
				NOT = {
					has_variable = recent_duchy_grab
				}
				save_temporary_scope_as = duchy_check2
				any_owned_province = {
					any_neighbor_province = {
						owner = root
						any_neighbor_province = {
							NOR = {
								owner = root
								owner = scope:duchy_check2
								owner = {
									is_subject_of = root
								}
							}
							owner = {
								has_land = yes
							}
						}
					}
				}
			}
			set_variable = {
				name = recent_duchy_grab
				days = 3650
			}
			save_scope_as = duchy_subject_grabber
			random_owned_province = {
				limit = {
					any_neighbor_province = {
						owner = root
						any_neighbor_province = {
							NOR = {
								owner = root
								owner = scope:duchy_subject_grabber
								owner = {
									is_subject_of = root
								}
							}
							owner = {
								has_land = yes
							}
						}
					}
				}
				random_neighbor_province = {
					limit = {
						owner = root
						any_neighbor_province = {
							NOR = {
								owner = root
								owner = scope:duchy_subject_grabber
								owner = {
									is_subject_of = root
								}
							}
							owner = {
								has_land = yes
							}
						}
					}
					this.state = {
						save_scope_as = state_duchy_grab
					}
				}
			}
		}
	}
	option = {
		name = low_stab_event.9.a
		custom_tooltip = low_stab_event.9.a.tt1
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				stability < 5
			}
			modifier = {
				factor = 2
				stability < 15
			}
		}
		if = {
			limit = {
				manpower < num_of_provinces
			}
			custom_tooltip = low_stab_event.9.a.tt2
		}
		hidden_effect = {
			scope:state_duchy_grab = {
				every_state_province = {
					limit = {
						owner = root
					}
					set_owned_by = scope:duchy_subject_grabber
				}
			}
		}
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_stability = 3
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_stability = 2
		}
		else = {
			add_stability = 1
		}
	}
	option = {
		name = low_stab_event.9.b
		custom_tooltip = low_stab_event.9.b.tt1
		trigger = {
			manpower >= root.num_of_provinces
		}
		if = {
			limit = {
				has_law = decentralized_administration_law
			}
			add_tyranny = 7
		}
        add_manpower = {
            value = root.num_of_provinces
            multiply = -1
        }
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_political_influence = -5
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_political_influence = -10
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_political_influence = -15
		}
		else = {
			add_political_influence = -20
		}
		scope:duchy_subject_grabber = {
			add_opinion = {
				modifier = extension_stopped
				target = root
			}
		}
	}
}

low_stab_event.10 = {
	#Most sized culture ask for noble rights or secede
	type = country_event
	title = "low_stab_event.10.t"
	desc = "low_stab_event.10.desc"
	left_portrait = current_ruler
	picture = roman_trial
	trigger = {
		has_land = yes
		has_country_modifier = internal_collapse
		NOT = {
			stability >= 25
		}
		NOT = {
			has_variable = recent_minority_want
		}
		any_country_culture = {
			NOT = {
				has_pop_type_right = nobles
			}
		}
	}
	weight_multiplier = {
		modifier = {
			factor = 1.5
			num_of_cities >= 1000
		}
		modifier = {
			factor = 1.5
			num_of_cities >= 2000
		}
		modifier = {
			factor = 1.5
			num_of_cities >= 3000
		}
		modifier = {
			factor = 0.1
			NOT = {any_country_culture = {
				NOT = {
					has_pop_type_right = nobles
				}
				country_culture_pop_count >= 200
			}}
		}
		modifier = {
			factor = 1.5
			any_country_culture = {
				NOT = {
					has_pop_type_right = nobles
				}
				country_culture_pop_count >= 500
			}
		}
		modifier = {
			factor = 1.5
			any_country_culture = {
				NOT = {
					has_pop_type_right = nobles
				}
				country_culture_pop_count >= 1000
			}
		}
		modifier = {
			factor = 1.5
			any_country_culture = {
				NOT = {
					has_pop_type_right = nobles
				}
				country_culture_pop_count >= 2000
			}
		}
	}
	immediate = {
		set_variable = {
			name = recent_minority_want
			days = 3650
		}
		ordered_country_culture = {
			limit = {
				NOT = {
					has_pop_type_right = nobles
				}
			}
			max = 1
			order_by = country_culture_pop_count
			save_scope_as = asking_minority_want
		}
	}
	option = {
		name = low_stab_event.10.a
		custom_tooltip = low_stab_event.10.a.tt1
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				stability < 5
			}
			modifier = {
				factor = 2
				stability < 15
			}
		}
		scope:asking_minority_want = {
			set_country_culture_right = nobles
		}
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_stability = 2
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_stability = 1
		}
		else = {
		}
	}
	option = {
		name = low_stab_event.10.b
		custom_tooltip = low_stab_event.10.b.tt1
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_political_influence = -5
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_political_influence = -10
			add_stability = -1
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_political_influence = -15
			add_stability = -2
		}
		else = {
			add_political_influence = -20
			add_stability = -3
		}
		scope:asking_minority_want = {
			add_country_culture_modifier = {
				name = on_going_mass_revolt
				duration = 3650
			}
            add_country_culture_modifier = {
                name = growing_revolt
                duration = 1825
            }
			if = {#just in case
				limit = {
					has_country_culture_modifier = new_culture_elite
				}
				remove_country_culture_modifier = new_culture_elite
			}
		}
	}
}

low_stab_event.11 = {
	#High tyranny : time to revolt !
	type = country_event
	title = "low_stab_event.11.t"
	desc = "low_stab_event.11.desc"
	left_portrait = current_ruler
	right_portrait = scope:tyranny_character
	picture = senator_conversing
	trigger = {
		has_land = yes
		has_country_modifier = internal_collapse
		NOT = {
			stability >= 25
		}
		stability >= 10 #so the stabhit is awful
		tyranny >= 40
		NOT = {
			has_variable = recent_tyranny_revolt
		}
		any_character = {
			power_base >= 15
			loyalty < 33
		}
	}
	weight_multiplier = {
		modifier = {
			factor = 1.5
			num_of_cities >= 1000
		}
		modifier = {
			factor = 1.5
			num_of_cities >= 2000
		}
		modifier = {
			factor = 1.5
			num_of_cities >= 3000
		}
		modifier = {
			factor = 2
			tyranny >= 70
		}
	}
	immediate = {
		set_variable = {
			name = recent_tyranny_revolt
			days = 3650
		}
		random_character = {
			limit = {
				power_base >= 15
				loyalty < 33
			}
			save_scope_as = tyranny_character
		}
		if = {
			limit = {
				has_country_modifier = military_anarchy
				any_character = {
					loyalty >= 50
					has_character_modifier = king_maker
				}
			}
			save_scope_as = king_maker_tyranny

		}
	}
	option = {#reduce tyranny, high stabhit
		name = low_stab_event.11.a
		custom_tooltip = low_stab_event.11.a.tt1
		add_tyranny = -10
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_stability = -3
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_stability = -5
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_stability = -7
		}
		else = {
			add_stability = -10
		}
	}
	option = {#global unrest
		name = low_stab_event.11.b
		custom_tooltip = low_stab_event.11.b.tt1
		scope:tyranny_character = {
			add_loyalty = political_coup
		}
		custom_tooltip = low_stab_event.11.b.tt2
		hidden_effect = {
			every_character = {
				limit =  {
					NOT = {
						this = scope:tyranny_character
					}
					family = {
						this = scope:tyranny_character.family
					}
				}
				add_loyalty = coup_unloyal
			}
		}
		custom_tooltip = low_stab_event.11.b.tt3
		hidden_effect = {
			every_governorships = {
				limit =  {
					governor = {
						OR = {
							loyalty < 33
							family = {
								this = scope:tyranny_character.family
							}
						}
					}
				}
				every_governorship_state = {
					add_state_modifier = {
						name = enough_tyranny
						duration = 1850
					}
				}
			}
		}
	}
	option = {#loyal kingmaker has power
		name = low_stab_event.11.c
		custom_tooltip = low_stab_event.11.c.tt1
		trigger = {
			has_country_modifier = military_anarchy
			any_character = {
				loyalty >= 50
				has_character_modifier = king_maker
			}
		}
		scope:king_maker_tyranny = {
			add_popularity = 25
		}
        scope:tyranny_character = {
			death = {
				death_reason = death_execution
				killer = scope:king_maker_tyranny
			}
		}
		add_tyranny = 5
		add_stability = 2
	}
}


low_stab_event.12 = {
	#governors ask for country control
	type = country_event
	title = "low_stab_event.12.t"
	desc = "low_stab_event.12.desc"
	left_portrait = current_ruler
	right_portrait = scope:tyranny_character
	picture = senator_conversing
	trigger = {
		has_land = yes
		has_country_modifier = internal_collapse
		has_country_modifier = solidus_introduced
		NOR = {
			stability >= 25
			has_variable = recent_governorship_givaway
		}
		current_ruler = {save_temporary_scope_as = owner_tmp_check}
		any_governorships = {
			exists = governor
			governor = {
				NOT = {
					family = root.current_ruler.family
				}
			}
			NOT = {has_variable = governorship_owner}
			region_control_value_char > 20 #ruler have 20% holdings
		}
	}
	weight_multiplier = {
		modifier = {
			factor = 1.5
			num_of_cities >= 1000
		}
		modifier = {
			factor = 1.5
			num_of_cities >= 2000
		}
		modifier = {
			factor = 1.5
			num_of_cities >= 3000
		}
		modifier = {
			factor = 5
			NOT = {
				any_character = {
					has_character_modifier = major_influence_aristocrat
				}
			}
		}
	}
	immediate = {
		set_variable = {
			name = recent_governorship_givaway
			days = 365
		}
		current_ruler = {
			save_scope_as = owner_tmp_check
		}
		ordered_governorships = {
			limit = {
				exists = governor
				governor = {
					NOT = {
						family = root.current_ruler.family
					}
				}
				NOT = {has_variable = governorship_owner}
				region_control_value_char > 20 #ruler have 20% holdings
			}
			max = country_size_ratio
			add_to_list = givaway_govships
		}
	}
	option = {#givaway govs
		name = low_stab_event.12.a
		custom_tooltip = low_stab_event.12.a.tt1
		every_governorships = {
			limit = {
				is_in_list = givaway_govships
			}
			save_scope_as = tmp_loc_govship
			custom_tooltip = low_stab_event.12.a.tt2
			hidden_effect = {
				set_variable = {
					name = recently_gavaway
					days = 365
				}
				every_governorship_state = {
					every_state_province = {
						limit = {
							exists = holding_owner
							holding_owner = {
								this = root.current_ruler
							}
						}
						root.current_ruler = {
							remove_holding = prev
						}
						governor = {
							add_holding = prev
						}
					}
				}
			}
		}
		add_stability = 4
	}
	option = {#nope
		name = low_stab_event.11.b
		custom_tooltip = low_stab_event.11.b.tt1
		add_tyranny = 8
		every_governorships = {
			limit = {
				is_in_list = givaway_govships
			}
			governor = {
				add_loyalty = medium_requests_denied
			}
		}
		if = {
			limit = {
				num_of_cities <= 1000
			}
			add_stability = -1
		}
		else_if = {
			limit = {
				num_of_cities <= 2000
			}
			add_stability = -2
		}
		else_if = {
			limit = {
				num_of_cities <= 3000
			}
			add_stability = -3
		}
		else = {
			add_stability = -5
		}
	}

	after = {
		every_governorships = {
			limit = {
				is_in_list = givaway_govships
			}
			remove_from_list = givaway_govships
		}
	}
}